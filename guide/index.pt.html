<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Guia de Configura√ß√£o do N√≥ | Mostro P2P</title>
  <meta name="description" content="Guia completo para executar seu pr√≥prio n√≥ Mostro P2P de troca de Bitcoin. Configura√ß√£o passo a passo para Docker e compila√ß√£o nativa.">
  <link rel="stylesheet" href="guide-styles.css">
  <link rel="icon" href="../assets/images/favicon.png" type="image/png">
</head>
<body>

<header class="guide-header">
  <a href="../index.pt.html" class="header-logo">
    <img src="../assets/images/logo.svg" alt="Mostro">
    <span>Guia do N√≥</span>
  </a>
  <div class="header-right">
    <div class="lang-switcher">
      <a href="index.html">EN</a>
      <a href="index.es.html">ES</a>
      <a href="index.it.html">IT</a>
      <a href="index.pt.html" class="active">PT</a>
    </div>
    <button class="toc-toggle" onclick="toggleSidebar()">‚ò∞ Menu</button>
  </div>
</header>

<div class="sidebar-overlay" id="sidebarOverlay" onclick="toggleSidebar()"></div>

<aside class="guide-sidebar" id="sidebar">
  <div class="toc-title">√çndice</div>
  <ul class="toc-list">
    <li><a href="#o-que-e-mostro">1. O que √© Mostro?</a></li>
    <li class="toc-sub"><a href="#por-que-no">Por que um n√≥?</a></li>
    <li class="toc-sub"><a href="#como-funciona">Como funciona</a></li>
    <li><a href="#prerequisitos">2. Pr√©-requisitos</a></li>
    <li class="toc-sub"><a href="#vps">Servidor (VPS)</a></li>
    <li class="toc-sub"><a href="#lnd">N√≥ Lightning (LND)</a></li>
    <li class="toc-sub"><a href="#liquidez">Liquidez</a></li>
    <li class="toc-sub"><a href="#chaves-nostr">Chaves Nostr</a></li>
    <li class="toc-sub"><a href="#nivel-tecnico">N√≠vel t√©cnico</a></li>
    <li><a href="#instalacao">3. Instala√ß√£o</a></li>
    <li class="toc-sub"><a href="#caminho-a-docker">Caminho A: Docker</a></li>
    <li class="toc-sub"><a href="#caminho-b-nativo">Caminho B: Nativo</a></li>
    <li><a href="#configuracao">4. Configura√ß√£o</a></li>
    <li class="toc-sub"><a href="#cfg-nostr">Chaves Nostr</a></li>
    <li class="toc-sub"><a href="#cfg-taxas">Taxas</a></li>
    <li class="toc-sub"><a href="#cfg-limites">Limites</a></li>
    <li class="toc-sub"><a href="#cfg-perfil">Perfil do n√≥</a></li>
    <li class="toc-sub"><a href="#cfg-tempos">Tempos</a></li>
    <li class="toc-sub"><a href="#cfg-antispam">Anti-Spam</a></li>
    <li class="toc-sub"><a href="#cfg-rpc">RPC Admin</a></li>
    <li><a href="#operacao">5. Opera√ß√£o do n√≥</a></li>
    <li class="toc-sub"><a href="#disputas">Disputas</a></li>
    <li class="toc-sub"><a href="#mostrix">Mostrix</a></li>
    <li class="toc-sub"><a href="#watchdog">mostro-watchdog</a></li>
    <li class="toc-sub"><a href="#monitoramento">Monitoramento</a></li>
    <li class="toc-sub"><a href="#atualizacao">Atualiza√ß√£o</a></li>
    <li class="toc-sub"><a href="#backups">Backups</a></li>
    <li class="toc-sub"><a href="#atividade">Atividade</a></li>
    <li><a href="#custos">6. An√°lise de custos</a></li>
    <li><a href="#perguntas">7. Perguntas frequentes</a></li>
    <li><a href="#seguranca">8. Seguran√ßa</a></li>
    <li><a href="#solucao-problemas">9. Solu√ß√£o de problemas</a></li>
    <li><a href="#apendice">Ap√™ndice</a></li>
  </ul>
</aside>

<main class="guide-content">

<h1>Executando Seu Pr√≥prio N√≥ Mostro</h1>
<p class="guide-version">Mostro v0.16.2 ‚Äî Guia da Comunidade ¬∑ Fevereiro 2026</p>

<h2 id="o-que-e-mostro">1. O que √© Mostro e por que sua comunidade deveria executar um?</h2>

<h3 id="o-que-e-mostro-sub">O que √© Mostro?</h3>

<p>Mostro √© uma <strong>exchange peer-to-peer de Bitcoin</strong> que permite que pessoas comprem e vendam Bitcoin usando moedas locais (d√≥lares, euros, reais ‚Äî qualquer moeda) sem precisar fornecer documentos de identidade (KYC). Pense nele como um marketplace descentralizado onde compradores e vendedores podem negociar diretamente.</p>

<p>Funciona usando duas tecnologias:</p>
<ul>
  <li><strong>Lightning Network</strong> ‚Äî uma camada de pagamentos r√°pidos e de baixo custo para Bitcoin (pense nela como a via expressa do Bitcoin para pagamentos pequenos e √°geis)</li>
  <li><strong>Nostr</strong> ‚Äî um protocolo de comunica√ß√£o resistente √† censura (pense nele como um sistema de mensagens que ningu√©m pode derrubar)</li>
</ul>

<p>Mostro atua como um <strong>coordenador de cust√≥dia</strong> ‚Äî ret√©m os Bitcoin do vendedor em um "cofre" tempor√°rio (chamado hold invoice) at√© que o comprador confirme que enviou o pagamento em moeda local. O Mostro nunca controla os fundos de ningu√©m; apenas os ret√©m brevemente durante a negocia√ß√£o.</p>

<h3 id="por-que-no">Por que sua comunidade quereria executar um n√≥ Mostro?</h3>

<ol>
  <li><strong>Renda com taxas</strong> ‚Äî Cada negocia√ß√£o gera uma taxa (0,6% por padr√£o). Se sua comunidade faz $10.000 em negocia√ß√µes mensais, s√£o ~$60/m√™s em taxas.</li>
  <li><strong>Trading P2P sem KYC</strong> ‚Äî Os membros da sua comunidade podem comprar e vender Bitcoin sem fornecer documentos de identidade. Especialmente importante em regi√µes com moedas inst√°veis ou regulamenta√ß√µes restritivas.</li>
  <li><strong>Disputas no seu idioma</strong> ‚Äî Quando uma negocia√ß√£o d√° errado, a <em>sua</em> comunidade resolve, no <em>seu</em> idioma, entendendo os <em>seus</em> m√©todos de pagamento locais.</li>
  <li><strong>Independ√™ncia</strong> ‚Äî Nenhuma empresa pode fechar sua exchange. Nenhum governo pode pressionar um √∫nico operador para fech√°-la.</li>
  <li><strong>Personaliza√ß√£o</strong> ‚Äî Voc√™ escolhe quais moedas suportar, quais m√©todos de pagamento permitir e quais taxas cobrar.</li>
</ol>

<h3 id="como-funciona">Como o Mostro Funciona (Simplificado)</h3>

<div class="flow-diagram"><span class="step-num">1.</span> Alice quer VENDER Bitcoin por $50 USD
   <span class="arrow">‚Üí</span> Ela cria uma ordem no Mostro

<span class="step-num">2.</span> Bob quer COMPRAR Bitcoin com $50 USD
   <span class="arrow">‚Üí</span> Ele v√™ a ordem da Alice e a aceita

<span class="step-num">3.</span> Mostro cria um "cofre" (hold invoice)
   <span class="arrow">‚Üí</span> Alice envia seus Bitcoin para o cofre

<span class="step-num">4.</span> Bob envia $50 para Alice via transfer√™ncia, PIX, dinheiro, etc.
   <span class="arrow">‚Üí</span> Bob pressiona "Fiat Enviado" no seu app

<span class="step-num">5.</span> Alice confirma que recebeu os $50
   <span class="arrow">‚Üí</span> Ela pressiona "Liberar"

<span class="step-num">6.</span> Mostro libera os Bitcoin do cofre para Bob
   <span class="arrow">‚Üí</span> Negocia√ß√£o conclu√≠da! <span class="check">‚úì</span></div>

<p>Se algo der errado (ex: Bob diz que pagou mas Alice n√£o recebeu), qualquer uma das partes pode abrir uma <strong>disputa</strong>, e os √°rbitros designados da sua comunidade investigam e resolvem.</p>

<hr>

<h2 id="prerequisitos">2. Pr√©-requisitos ‚Äî O que voc√™ precisa antes de come√ßar</h2>

<h3 id="vps">2.1 Um Servidor (VPS)</h3>

<p>Um <strong>VPS</strong> (Servidor Virtual Privado) √© um computador em um data center que funciona 24/7. Voc√™ vai alugar um para hospedar seu n√≥ Mostro.</p>

<p><strong>Especifica√ß√µes m√≠nimas:</strong></p>
<div class="table-wrapper">
<table>
  <thead><tr><th>Recurso</th><th>M√≠nimo</th><th>Recomendado</th></tr></thead>
  <tbody>
    <tr><td>CPU</td><td>2 vCPUs (compartilhadas)</td><td>2+ vCPUs</td></tr>
    <tr><td>RAM</td><td>2 GB</td><td>4 GB</td></tr>
    <tr><td>Armazenamento</td><td>60 GB SSD</td><td>100 GB SSD</td></tr>
    <tr><td>Largura de banda</td><td>3 TB/m√™s</td><td>3+ TB/m√™s</td></tr>
    <tr><td>SO</td><td>Ubuntu 22.04+ LTS</td><td>Ubuntu 24.04 LTS</td></tr>
  </tbody>
</table>
</div>

<p><strong>Custo mensal estimado:</strong> $10‚Äì$24/m√™s.</p>

<p><strong>Provedores VPS populares:</strong></p>
<ul>
  <li><a href="https://www.hostinger.com/" target="_blank" rel="noopener noreferrer">Hostinger</a> ‚Äî a partir de ~$7/m√™s (pre√ßo promocional; renova√ß√£o pode ser maior) (KVM 2: 2 vCPU, 8GB RAM, 100GB NVMe, 8TB bandwidth) ¬∑ Aceita Bitcoin</li>
  <li><a href="https://www.hetzner.com/" target="_blank" rel="noopener noreferrer">Hetzner</a> ‚Äî ‚Ç¨3.49-8/m√™s (CX23 a partir de ‚Ç¨3.49, bom custo-benef√≠cio, baseado na UE)</li>
  <li><a href="https://www.digitalocean.com/" target="_blank" rel="noopener noreferrer">Digital Ocean</a> ‚Äî $24/m√™s (4GB RAM, 2 CPUs, 80GB SSD) ou $32/m√™s (4GB RAM, 2 Intel CPUs, 120GB NVMe)</li>
  <li><a href="https://www.ovhcloud.com/" target="_blank" rel="noopener noreferrer">OVH</a> ‚Äî ~$6-12/m√™s</li>
  <li><a href="https://www.linode.com/" target="_blank" rel="noopener noreferrer">Linode/Akamai</a> ‚Äî $12/m√™s</li>
  <li><a href="https://www.lunanode.com/" target="_blank" rel="noopener noreferrer">Lunanode</a> ‚Äî Aceita pagamentos em Bitcoin</li>
</ul>

<div class="callout tip">
  <div class="callout-title">üí° Dica</div>
  Muitos provedores VPS aceitam pagamentos em Bitcoin. Procure essa op√ß√£o se quiser manter coer√™ncia com a filosofia Bitcoin.
</div>

<p>Voc√™ precisa estar confort√°vel conectando-se a um servidor via SSH. Se nunca fez isso, procure um tutorial sobre "conectar via SSH a um VPS" ‚Äî √© mais simples do que parece.</p>

<h3 id="lnd">2.2 Um N√≥ Lightning Network (LND)</h3>

<p>A Lightning Network √© um sistema "camada 2" constru√≠do sobre o Bitcoin que permite pagamentos r√°pidos e baratos. Para executar o Mostro, voc√™ precisa de um <strong>n√≥ LND</strong> (Lightning Network Daemon) ‚Äî o software Lightning espec√≠fico com que o Mostro funciona.</p>

<p><strong>Suas op√ß√µes:</strong></p>
<div class="table-wrapper">
<table>
  <thead><tr><th>Op√ß√£o</th><th>Dificuldade</th><th>Custo</th><th>Notas</th></tr></thead>
  <tbody>
    <tr><td>Usar um n√≥ LND existente</td><td><span class="badge badge-easy">F√°cil</span></td><td>Gr√°tis (se voc√™ j√° tem um)</td><td>Melhor se algu√©m j√° tem um</td></tr>
    <tr><td>Executar LND no mesmo VPS</td><td><span class="badge badge-hard">Dif√≠cil</span></td><td>Mesmo VPS + liquidez</td><td>Requer VPS com 4GB+ RAM</td></tr>
    <tr><td>Solu√ß√£o n√≥-na-caixa</td><td><span class="badge badge-medium">M√©dio</span></td><td>$200-600 + liquidez</td><td><a href="https://start9.com/" target="_blank" rel="noopener noreferrer">Start9</a>, <a href="https://umbrel.com/" target="_blank" rel="noopener noreferrer">Umbrel</a>, <a href="https://raspiblitz.org/" target="_blank" rel="noopener noreferrer">RaspiBlitz</a></td></tr>
    <tr><td>StartOS com pacote Mostro</td><td><span class="badge badge-easy">Mais f√°cil</span></td><td>$300-600 + liquidez</td><td>Start9 tem um pacote Mostro com instala√ß√£o em um clique</td></tr>
    <tr><td>Usar Voltage.cloud</td><td><span class="badge badge-easy">F√°cil</span></td><td>A partir de ~$20/m√™s + liquidez</td><td><a href="https://voltage.cloud/" target="_blank" rel="noopener noreferrer">Voltage</a> ‚Äî LND hospedado com infraestrutura gerenciada</td></tr>
  </tbody>
</table>
</div>

<div class="callout warning">
  <div class="callout-title">‚ö†Ô∏è Importante</div>
  Mostro requer especificamente <strong>LND</strong> (n√£o CLN/Core Lightning, n√£o Eclair, n√£o LDK). Certifique-se de que seu n√≥ Lightning execute LND.
</div>

<p><strong>O que voc√™ precisa do seu n√≥ LND:</strong></p>
<ul>
  <li>O arquivo <code>tls.cert</code> (um certificado de seguran√ßa)</li>
  <li>O arquivo <code>admin.macaroon</code> (um token de autentica√ß√£o)</li>
  <li>O endere√ßo gRPC (tipicamente <code>https://127.0.0.1:10009</code> se na mesma m√°quina)</li>
</ul>

<h3 id="liquidez">2.3 Liquidez Lightning</h3>

<p>Para facilitar negocia√ß√µes, seu n√≥ Lightning precisa de <strong>canais</strong> com Bitcoin neles. Pense nos canais Lightning como t√∫neis de pagamento pr√©-financiados. O Bitcoin dentro desses canais √© sua "liquidez".</p>

<p><strong>Quanto voc√™ precisa?</strong></p>
<div class="table-wrapper">
<table>
  <thead><tr><th>Volume de trading alvo</th><th>Liquidez sugerida</th><th>BTC aproximado</th></tr></thead>
  <tbody>
    <tr><td>Comunidade pequena (poucas negocia√ß√µes/dia)</td><td>1‚Äì5 milh√µes de sats</td><td>0,01‚Äì0,05 BTC</td></tr>
    <tr><td>Comunidade m√©dia</td><td>5‚Äì20 milh√µes de sats</td><td>0,05‚Äì0,20 BTC</td></tr>
    <tr><td>Comunidade ativa</td><td>20‚Äì100 milh√µes de sats</td><td>0,20‚Äì1,0 BTC</td></tr>
  </tbody>
</table>
</div>

<div class="callout tip">
  <div class="callout-title">üí° Nota sobre Liquidez Lightning</div>
  O Bitcoin nos seus canais Lightning est√° bloqueado <strong>onchain</strong> mas permanece altamente gast√°vel via Lightning Network. Muitos servi√ßos aceitam pagamentos Lightning ‚Äî desde cafeterias at√© provedores VPS ‚Äî tornando sua liquidez bastante flex√≠vel para uso cotidiano.
</div>

<p><strong>Comece pequeno, cres√ßa gradualmente.</strong> Comece com o suficiente para as necessidades iniciais da sua comunidade e monitore o feedback. Quando traders reportarem que ordens falham por capacidade insuficiente, esse √© o sinal para adicionar mais.</p>

<p><strong>Obtendo liquidez:</strong></p>
<ul>
  <li>Abra canais para n√≥s bem conectados (use <a href="https://1ml.com/" target="_blank" rel="noopener noreferrer">1ML</a> ou <a href="https://amboss.space/" target="_blank" rel="noopener noreferrer">Amboss</a> para encontrar bons pares)</li>
  <li>Voc√™ precisa de capacidade <strong>de sa√≠da</strong> (para pagar compradores) e capacidade <strong>de entrada</strong> (para receber de vendedores)</li>
  <li>Obter liquidez de entrada √© geralmente mais dif√≠cil ‚Äî considere <a href="https://lightning.engineering/loop/" target="_blank" rel="noopener noreferrer">Lightning Loop</a>, <a href="https://amboss.space/magma" target="_blank" rel="noopener noreferrer">Magma</a>, ou servi√ßos de swap de canais</li>
</ul>

<h3 id="chaves-nostr">2.4 Chaves Nostr</h3>

<p>Seu n√≥ Mostro precisa de sua pr√≥pria identidade na rede Nostr ‚Äî um par de chaves criptogr√°ficas com uma chave p√∫blica (o endere√ßo do seu n√≥) e uma chave privada (seu segredo).</p>

<div class="callout warning">
  <div class="callout-title">‚ö†Ô∏è Importante</div>
  Nunca reutilize chaves Nostr entre inst√¢ncias do Mostro. Cada n√≥ precisa de sua pr√≥pria identidade √∫nica.
</div>

<p><strong>Gerando chaves Nostr seguras localmente com rana:</strong></p>

<div class="code-block">
  <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)" data-copy="Copiar" data-copied="Copiado!">Copiar</button></div>
  <pre><code><span class="cm"># Instalar Rust (se n√£o estiver instalado)</span>
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
source ~/.cargo/env

<span class="cm"># Instalar rana - gerador local de chaves Nostr</span>
cargo install rana

<span class="cm"># Gerar um novo par de chaves</span>
rana</code></pre>
</div>

<p>Rana gerar√° tanto sua chave privada (nsec) quanto sua chave p√∫blica (npub). <strong>Salve ambas com seguran√ßa!</strong> Nunca gere chaves importantes como estas usando servi√ßos online ‚Äî sempre use ferramentas locais como rana por seguran√ßa.</p>

<h3 id="nivel-tecnico">2.5 N√≠vel de conhecimento t√©cnico</h3>

<div class="table-wrapper">
<table>
  <thead><tr><th>Tarefa</th><th>Dificuldade</th><th>Conhecimentos necess√°rios</th></tr></thead>
  <tbody>
    <tr><td>Alugar um VPS</td><td><span class="badge badge-easy">F√°cil</span></td><td>Cart√£o de cr√©dito, navega√ß√£o web b√°sica</td></tr>
    <tr><td>Conectar via SSH</td><td><span class="badge badge-easy">F√°cil</span></td><td>Seguir instru√ß√µes, digitar comandos</td></tr>
    <tr><td>Instalar Docker</td><td><span class="badge badge-medium">M√©dio</span></td><td>Copiar e colar comandos, resolu√ß√£o b√°sica de problemas</td></tr>
    <tr><td>Executar Mostro (Docker)</td><td><span class="badge badge-medium">M√©dio</span></td><td>Editar arquivos de configura√ß√£o, entender caminhos</td></tr>
    <tr><td>Executar Mostro (nativo)</td><td><span class="badge badge-hard">Dif√≠cil</span></td><td>Administra√ß√£o Linux, compila√ß√£o de software, systemd</td></tr>
    <tr><td>Configurar LND do zero</td><td><span class="badge badge-hard">Dif√≠cil</span></td><td>Conhecimento significativo de Linux e redes</td></tr>
    <tr><td>Gerenciar liquidez Lightning</td><td><span class="badge badge-hard">Dif√≠cil</span></td><td>Entender a economia de canais Lightning</td></tr>
  </tbody>
</table>
</div>

<p><strong>Nossa recomenda√ß√£o:</strong> Se sua comunidade tem algu√©m confort√°vel com a linha de comando Linux, essa pessoa pode lidar com a instala√ß√£o Docker (Caminho A). Para o Caminho B, √© necess√°rio algu√©m com experi√™ncia em administra√ß√£o de sistemas. A configura√ß√£o do n√≥ Lightning √© a parte mais complexa ‚Äî considere pedir ajuda a algu√©m experiente, ou usar uma solu√ß√£o n√≥-na-caixa.</p>

<hr>

<h2 id="instalacao">3. Instala√ß√£o Passo a Passo</h2>

<p>Escolha seu caminho:</p>
<ul>
  <li><strong>Caminho A (Docker):</strong> Mais simples, menos passos, atualiza√ß√µes mais f√°ceis. Recomendado para a maioria.</li>
  <li><strong>Caminho B (Compila√ß√£o nativa):</strong> Mais controle, melhor para sysadmins experientes.</li>
</ul>

<p>Ambos os caminhos assumem que voc√™ j√° tem: ‚úÖ Um VPS com Ubuntu ¬∑ ‚úÖ Acesso SSH ¬∑ ‚úÖ Um n√≥ LND funcionando.</p>

<details class="collapsible" id="caminho-a-docker" open>
<summary>Caminho A: Instala√ß√£o Docker (Recomendada para iniciantes)</summary>
<div class="collapsible-content">

<h4>Passo 1: Conecte-se ao seu VPS</h4>
<div class="code-block">
  <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)" data-copy="Copiar" data-copied="Copiado!">Copiar</button></div>
  <pre><code>ssh root@ENDERECO_IP_DO_SEU_VPS</code></pre>
</div>

<h4>Passo 2: Atualize o sistema</h4>
<div class="code-block">
  <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)" data-copy="Copiar" data-copied="Copiado!">Copiar</button></div>
  <pre><code><span class="cm"># Baixar as informa√ß√µes mais recentes dos pacotes</span>
apt update

<span class="cm"># Instalar todas as atualiza√ß√µes dispon√≠veis</span>
apt upgrade -y</code></pre>
</div>

<h4>Passo 3: Instalar Docker e Docker Compose</h4>
<div class="code-block">
  <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)" data-copy="Copiar" data-copied="Copiado!">Copiar</button></div>
  <pre><code><span class="cm"># Instalar Docker com o script oficial</span>
curl -fsSL https://get.docker.com | sh

<span class="cm"># Verificar que o Docker est√° instalado</span>
docker --version

<span class="cm"># Verificar Docker Compose</span>
docker compose version</code></pre>
</div>

<h4>Passo 4: Instalar ferramentas adicionais</h4>
<div class="code-block">
  <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)" data-copy="Copiar" data-copied="Copiado!">Copiar</button></div>
  <pre><code>apt install -y git make</code></pre>
</div>

<h4>Passo 5: Baixar o Mostro</h4>
<div class="code-block">
  <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)" data-copy="Copiar" data-copied="Copiado!">Copiar</button></div>
  <pre><code>cd /opt
git clone https://github.com/MostroP2P/mostro.git
cd mostro</code></pre>
</div>

<h4>Passo 6: Configurar os arquivos</h4>
<div class="code-block">
  <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)" data-copy="Copiar" data-copied="Copiado!">Copiar</button></div>
  <pre><code>cd docker
mkdir -p config
cp ../settings.tpl.toml config/settings.toml</code></pre>
</div>

<div class="callout tip">
  <div class="callout-title">üí° Mudan√ßas na v0.16.2+</div>
  <ul>
    <li>N√£o h√° mais <code>empty.mostro.db</code> ‚Äî Mostro cria o banco de dados automaticamente</li>
    <li><code>settings.docker.toml</code> ‚Üí <code>settings.tpl.toml</code> (nome do template mudou)</li>
    <li>N√£o h√° mais arquivo <code>.env</code> ‚Äî vari√°veis de ambiente s√£o passadas diretamente para o comando de build</li>
  </ul>
</div>
</div>

<h4>Passo 7: Editar o arquivo de configura√ß√£o</h4>
<div class="code-block">
  <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)" data-copy="Copiar" data-copied="Copiado!">Copiar</button></div>
  <pre><code>nano config/settings.toml</code></pre>
</div>

<p>Voc√™ <strong>deve</strong> configurar estas configura√ß√µes-chave:</p>
<ol>
  <li><strong><code>lnd_grpc_host</code></strong> ‚Äî O endere√ßo do seu n√≥ LND:
    <ul>
      <li>Mesma m√°quina: <code>'https://host.docker.internal:10009'</code></li>
      <li>M√°quina diferente: <code>'https://SEU_IP_LND:10009'</code></li>
    </ul>
  </li>
  <li><strong><code>lnd_cert_file</code></strong> e <strong><code>lnd_macaroon_file</code></strong> ‚Äî Configure-os como:
    <ul>
      <li><code>lnd_cert_file = '/config/lnd/tls.cert'</code></li>
      <li><code>lnd_macaroon_file = '/config/lnd/admin.macaroon'</code></li>
    </ul>
  </li>
  <li><strong><code>nsec_privkey</code></strong> ‚Äî A chave privada Nostr do seu Mostro. Gere localmente usando <code>rana</code> (veja se√ß√£o 2.4). <strong>Salve tanto a nsec quanto a npub com seguran√ßa!</strong></li>
  <li><strong><code>relays</code></strong> ‚Äî Os relays Nostr aos quais seu n√≥ se conectar√°.</li>
  <li><strong><code>url</code></strong> (na se√ß√£o [database]) ‚Äî Configure como: <code>"sqlite:///config/mostro.db"</code></li>
</ol>

<p><strong>Outras configura√ß√µes que provavelmente vai querer alterar:</strong></p>
<div class="code-block">
  <div class="code-block-header"><span>toml</span><button class="copy-btn" onclick="copyCode(this)" data-copy="Copiar" data-copied="Copiado!">Copiar</button></div>
  <pre><code>[mostro]
fee = 0.006                    <span class="cm"># 0,6% taxa por negocia√ß√£o</span>
max_order_amount = 1000000     <span class="cm"># Ordem m√°xima em sats (~$400-500)</span>
min_payment_amount = 100       <span class="cm"># Ordem m√≠nima em sats</span>
fiat_currencies_accepted = ['USD', 'BRL']  <span class="cm"># Suas moedas</span>

[database]
url = "sqlite:///config/mostro.db"  <span class="cm"># Caminho do banco de dados no cont√™iner</span></code></pre>
</div>

<p>Salvar: <code>Ctrl+X</code>, depois <code>Y</code>, depois <code>Enter</code>.</p>

<h4>Passo 8: Construir a imagem Docker</h4>

<p>Voc√™ precisa fornecer as vari√°veis de ambiente <code>LND_CERT_FILE</code> e <code>LND_MACAROON_FILE</code> apontando para seus arquivos LND. Estes ser√£o copiados para <code>config/lnd/</code> durante a constru√ß√£o.</p>

<div class="callout warning">
  <div class="callout-title">üìÅ Diret√≥rio de trabalho</div>
  Volte ao diret√≥rio raiz do reposit√≥rio antes de executar os comandos make:
</div>

<p><strong>Linux/macOS:</strong></p>
<div class="code-block">
  <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)" data-copy="Copiar" data-copied="Copiado!">Copiar</button></div>
  <pre><code>cd ..
LND_CERT_FILE=~/.polar/networks/1/volumes/lnd/alice/tls.cert \
LND_MACAROON_FILE=~/.polar/networks/1/volumes/lnd/alice/data/chain/bitcoin/regtest/admin.macaroon \
make docker-build</code></pre>
</div>

<p><strong>Windows PowerShell:</strong></p>
<div class="code-block">
  <div class="code-block-header"><span>powershell</span><button class="copy-btn" onclick="copyCode(this)" data-copy="Copiar" data-copied="Copiado!">Copiar</button></div>
  <pre><code>cd ..
$env:LND_CERT_FILE="C:\Users\SeuUsuario\.polar\networks\1\volumes\lnd\alice\tls.cert"
$env:LND_MACAROON_FILE="C:\Users\SeuUsuario\.polar\networks\1\volumes\lnd\alice\data\chain\bitcoin\regtest\admin.macaroon"
make docker-build</code></pre>
</div>

<p><strong>Alternativa:</strong> Exporte as vari√°veis para sua sess√£o:</p>
<div class="code-block">
  <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)" data-copy="Copiar" data-copied="Copiado!">Copiar</button></div>
  <pre><code>cd ..
export LND_CERT_FILE=~/.polar/networks/1/volumes/lnd/alice/tls.cert
export LND_MACAROON_FILE=~/.polar/networks/1/volumes/lnd/alice/data/chain/bitcoin/regtest/admin.macaroon
make docker-build</code></pre>
</div>

<p>Se LND est√° na <strong>mesma m√°quina</strong>, os caminhos t√≠picos s√£o:</p>
<ul>
  <li><code>/root/.lnd/tls.cert</code></li>
  <li><code>/root/.lnd/data/chain/bitcoin/mainnet/admin.macaroon</code></li>
</ul>

<p>Se LND est√° em uma <strong>m√°quina diferente</strong>, copie os arquivos para seu sistema local primeiro, depois aponte as vari√°veis de ambiente para essas c√≥pias locais.</p>

<h4>Passo 9: Iniciar o Mostro</h4>
<div class="code-block">
  <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)" data-copy="Copiar" data-copied="Copiado!">Copiar</button></div>
  <pre><code><span class="cm"># Iniciar Mostro e o relay Nostr local</span>
make docker-up</code></pre>
</div>

<p>Verifique se tudo est√° funcionando:</p>
<div class="code-block">
  <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)" data-copy="Copiar" data-copied="Copiado!">Copiar</button></div>
  <pre><code>docker compose -f compose.yml ps</code></pre>
</div>

<h4>Passo 10: Verificar os logs</h4>
<div class="code-block">
  <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)" data-copy="Copiar" data-copied="Copiado!">Copiar</button></div>
  <pre><code>docker compose -f compose.yml logs -f mostro</code></pre>
</div>

<p>Procure estas mensagens:</p>
<ul>
  <li><code>Settings correctly loaded</code> ‚Äî Configura√ß√£o v√°lida</li>
  <li><code>Connected to LND</code> ‚Äî Conex√£o Lightning bem-sucedida</li>
  <li><code>Connected to relay</code> ‚Äî Relay Nostr estabelecido</li>
</ul>

<h4>Parar e reiniciar</h4>
<div class="code-block">
  <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)" data-copy="Copiar" data-copied="Copiado!">Copiar</button></div>
  <pre><code>make docker-down   <span class="cm"># Parar</span>
make docker-up     <span class="cm"># Iniciar</span></code></pre>
</div>

<p>üéâ <strong>Parab√©ns!</strong> Se voc√™ v√™ conex√µes bem-sucedidas nos logs, seu n√≥ Mostro est√° funcionando!</p>

<hr>

<h4>Solu√ß√£o de Problemas Comuns do Docker</h4>

<details class="collapsible" id="solucao-problemas-docker">
<summary><strong>Problemas Frequentes e Solu√ß√µes</strong></summary>
<div class="collapsible-content">

<h5>‚ùå Erro: Permission denied (os error 13)</h5>

<div class="callout warning">
  <div class="callout-title">üõ†Ô∏è Problema de Permiss√µes do Banco de Dados</div>
  O SQLite precisa de permiss√µes de escrita tanto no arquivo do banco de dados quanto no diret√≥rio pai para criar arquivos tempor√°rios (<code>.db-wal</code>, <code>.db-shm</code>).
</div>

<p><strong>Corre√ß√£o R√°pida:</strong></p>
<div class="code-block">
  <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)" data-copy="Copiar" data-copied="Copiado!">Copiar</button></div>
  <pre><code><span class="cm"># Corrigir permiss√µes antes de iniciar</span>
sudo chown -R 1000:1000 ./config/
sudo chmod -R 755 ./config/

<span class="cm"># Depois iniciar normalmente</span>
make docker-up</code></pre>
</div>

<p><strong>Corre√ß√£o Permanente em docker-compose.yml:</strong></p>
<div class="code-block">
  <div class="code-block-header"><span>yaml</span><button class="copy-btn" onclick="copyCode(this)" data-copy="Copiar" data-copied="Copiado!">Copiar</button></div>
  <pre><code>services:
  mostro:
    # ... configura√ß√£o existente ...
    user: "1000:1000"  # Executar como usu√°rio n√£o-root
    volumes:
      - ./config:/config:rw  # Garantir acesso de leitura-escrita</code></pre>
</div>

<h5>‚ùå Erro: No such device or address (os error 6)</h5>

<div class="callout warning">
  <div class="callout-title">üñ•Ô∏è Problema de Prompt de Senha</div>
  O Mostro solicita senha do banco de dados interativamente, mas containers Docker n√£o t√™m TTY por padr√£o.
</div>

<p><strong>Op√ß√£o 1: Pular Criptografia do Banco de Dados (Mais R√°pido para Testes)</strong></p>
<div class="code-block">
  <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)" data-copy="Copiar" data-copied="Copiado!">Copiar</button></div>
  <pre><code><span class="cm"># Definir senha vazia para pular criptografia</span>
MOSTRO_DB_PASSWORD="" make docker-up</code></pre>
</div>

<p><strong>Op√ß√£o 2: Definir Senha via Vari√°vel de Ambiente</strong></p>
<div class="code-block">
  <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)" data-copy="Copiar" data-copied="Copiado!">Copiar</button></div>
  <pre><code><span class="cm"># Definir senha de forma segura</span>
MOSTRO_DB_PASSWORD="sua-senha-segura" make docker-up</code></pre>
</div>

<p><strong>Op√ß√£o 3: Habilitar Modo Interativo em docker-compose.yml</strong></p>
<div class="code-block">
  <div class="code-block-header"><span>yaml</span><button class="copy-btn" onclick="copyCode(this)" data-copy="Copiar" data-copied="Copiado!">Copiar</button></div>
  <pre><code>services:
  mostro:
    # ... configura√ß√£o existente ...
    tty: true        # Habilitar TTY para prompts interativos
    stdin_open: true # Habilitar STDIN
    environment:
      - MOSTRO_DB_PASSWORD=${DB_PASSWORD:-}  # Opcional: definir via .env</code></pre>
</div>

<h5>‚ùå Problemas de cria√ß√£o de arquivo do banco de dados</h5>

<p><strong>Garantir estrutura de diret√≥rio correta:</strong></p>
<div class="code-block">
  <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)" data-copy="Copiar" data-copied="Copiado!">Copiar</button></div>
  <pre><code><span class="cm"># Criar diret√≥rio com permiss√µes apropriadas</span>
mkdir -p docker/config
sudo chown -R $(id -u):$(id -g) docker/config
chmod 755 docker/config

<span class="cm"># Verificar permiss√µes</span>
ls -la docker/config/</code></pre>
</div>

<p><strong>Passos de debug:</strong></p>
<div class="code-block">
  <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)" data-copy="Copiar" data-copied="Copiado!">Copiar</button></div>
  <pre><code><span class="cm"># Verificar usu√°rio do container</span>
docker compose exec mostro whoami

<span class="cm"># Verificar permiss√µes do diret√≥rio montado dentro do container</span>
docker compose exec mostro ls -la /config

<span class="cm"># Corrigir permiss√µes do host (mais seguro que dentro do container)</span>
sudo chown -R 1000:1000 ./config/</code></pre>
</div>

</div>
</details>

<hr>

<h4>Alternativa: Execu√ß√£o do Docker Hub (Sem Necessidade de Compila√ß√£o)</h4>

<div class="callout tip">
  <div class="callout-title">üöÄ Novo na v0.16.2+</div>
  Agora voc√™ pode executar o Mostro diretamente do Docker Hub sem clonar o reposit√≥rio ou compilar localmente. Perfeito para deployments em VPS!
</div>

<p><strong>Passos para deployment em VPS:</strong></p>

<h5>1. Criar um diret√≥rio de configura√ß√£o</h5>
<div class="code-block">
  <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)" data-copy="Copiar" data-copied="Copiado!">Copiar</button></div>
  <pre><code>mkdir -p ~/mostro-config/lnd</code></pre>
</div>

<h5>2. Obter o template de configura√ß√£o</h5>
<div class="code-block">
  <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)" data-copy="Copiar" data-copied="Copiado!">Copiar</button></div>
  <pre><code>curl -sL https://raw.githubusercontent.com/MostroP2P/mostro/main/settings.tpl.toml -o ~/mostro-config/settings.toml</code></pre>
</div>

<h5>3. Copiar suas credenciais LND</h5>
<div class="code-block">
  <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)" data-copy="Copiar" data-copied="Copiado!">Copiar</button></div>
  <pre><code>cp /caminho/para/seu/tls.cert ~/mostro-config/lnd/tls.cert
cp /caminho/para/seu/admin.macaroon ~/mostro-config/lnd/admin.macaroon</code></pre>
</div>

<h5>4. Editar a configura√ß√£o</h5>
<div class="code-block">
  <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)" data-copy="Copiar" data-copied="Copiado!">Copiar</button></div>
  <pre><code>nano ~/mostro-config/settings.toml</code></pre>
</div>

<p><strong>Altera√ß√µes necess√°rias para deployment Docker Hub:</strong></p>
<div class="code-block">
  <div class="code-block-header"><span>toml</span><button class="copy-btn" onclick="copyCode(this)" data-copy="Copiar" data-copied="Copiado!">Copiar</button></div>
  <pre><code>[lightning]
lnd_cert_file = '/config/lnd/tls.cert'
lnd_macaroon_file = '/config/lnd/admin.macaroon'
lnd_grpc_host = 'https://host.docker.internal:10009'  <span class="cm"># Se LND no mesmo VPS</span>
<span class="cm"># Ou use 'https://SEU_IP_LND:10009' se LND em servidor diferente</span>

[database]
url = "sqlite:///config/mostro.db"

[nostr]
nsec_privkey = 'SUA_CHAVE_NSEC_AQUI'
relays = ['wss://relay.mostro.network', 'wss://nos.lol']</code></pre>
</div>

<h5>5. Executar o cont√™iner</h5>

<p><strong>Se LND est√° no mesmo VPS:</strong></p>
<div class="code-block">
  <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)" data-copy="Copiar" data-copied="Copiado!">Copiar</button></div>
  <pre><code>docker run -d --name mostro \
  --restart unless-stopped \
  --add-host=host.docker.internal:host-gateway \
  -v ~/mostro-config:/config \
  mostrop2p/mostro:latest</code></pre>
</div>

<p><strong>Se LND est√° em um servidor diferente:</strong></p>
<div class="code-block">
  <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)" data-copy="Copiar" data-copied="Copiado!">Copiar</button></div>
  <pre><code>docker run -d --name mostro \
  --restart unless-stopped \
  -v ~/mostro-config:/config \
  mostrop2p/mostro:latest</code></pre>
</div>

<h5>6. Verificar os logs</h5>
<div class="code-block">
  <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)" data-copy="Copiar" data-copied="Copiado!">Copiar</button></div>
  <pre><code>docker logs -f mostro</code></pre>
</div>

<p><strong>Vantagens do deployment Docker Hub:</strong></p>
<ul>
  <li>‚úÖ Sem tempo de compila√ß√£o (5-15 minutos economizados)</li>
  <li>‚úÖ N√£o precisa clonar reposit√≥rio</li>
  <li>‚úÖ Menores requisitos de armazenamento VPS</li>
  <li>‚úÖ Atualiza√ß√µes autom√°ticas com <code>docker pull mostrop2p/mostro:latest</code></li>
  <li>‚úÖ Perfeito para deployments de produ√ß√£o em VPS</li>
</ul>

<div class="callout warning">
  <div class="callout-title">üîí Nota de Seguran√ßa</div>
  Ao usar uma tag de vers√£o espec√≠fica (ex. <code>mostrop2p/mostro:v0.16.2</code>) em vez de <code>:latest</code>, voc√™ tem melhor controle sobre atualiza√ß√µes e pode testar novas vers√µes antes de fazer o deploy.
</div>

</div>
</details>

<details class="collapsible" id="caminho-b-nativo">
<summary>Caminho B: Compila√ß√£o Nativa (Para operadores t√©cnicos)</summary>
<div class="collapsible-content">

<h4>Passo 1: Conectar e atualizar</h4>
<div class="code-block">
  <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)" data-copy="Copiar" data-copied="Copiado!">Copiar</button></div>
  <pre><code>ssh root@ENDERECO_IP_DO_SEU_VPS
apt update
apt upgrade -y</code></pre>
</div>

<h4>Passo 2: Instalar Rust</h4>
<div class="code-block">
  <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)" data-copy="Copiar" data-copied="Copiado!">Copiar</button></div>
  <pre><code><span class="cm"># Instalar Rust (pressione 1 quando solicitado)</span>
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh

<span class="cm"># Tornar Rust dispon√≠vel na sess√£o atual</span>
source /root/.cargo/env

<span class="cm"># Verificar</span>
rustc --version   <span class="cm"># Esperado: rustc 1.86.0+</span>
cargo --version   <span class="cm"># Esperado: cargo 1.86.0+</span></code></pre>
</div>

<div class="callout warning">
  <div class="callout-title">‚ö†Ô∏è Importante</div>
  N√ÉO instale Rust via <code>apt install rustc</code>. Sempre use <code>rustup</code> como mostrado acima. O pacote do sistema geralmente est√° desatualizado e causar√° erros de compila√ß√£o.
</div>

<h4>Passo 3: Instalar depend√™ncias de compila√ß√£o</h4>
<div class="code-block">
  <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)" data-copy="Copiar" data-copied="Copiado!">Copiar</button></div>
  <pre><code>apt install -y cmake build-essential libsqlite3-dev libssl-dev pkg-config git sqlite3 protobuf-compiler</code></pre>
</div>

<h4>Passo 4: Baixar e compilar o Mostro</h4>
<div class="code-block">
  <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)" data-copy="Copiar" data-copied="Copiado!">Copiar</button></div>
  <pre><code>cd /opt
git clone https://github.com/MostroP2P/mostro.git
cd mostro
cargo build --release</code></pre>
</div>

<div class="callout tip">
  <div class="callout-title">üí° Dica</div>
  Se a compila√ß√£o falhar por falta de RAM, adicione espa√ßo swap:
  <div class="code-block" style="margin-top:10px">
    <pre><code>fallocate -l 2G /swapfile
chmod 600 /swapfile
mkswap /swapfile
swapon /swapfile</code></pre>
  </div>
</div>

<h4>Passo 5: Instalar o bin√°rio</h4>
<div class="code-block">
  <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)" data-copy="Copiar" data-copied="Copiado!">Copiar</button></div>
  <pre><code>install target/release/mostrod /usr/local/bin
mostrod --version</code></pre>
</div>

<h4>Passo 6: Inicializar o banco de dados</h4>
<div class="code-block">
  <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)" data-copy="Copiar" data-copied="Copiado!">Copiar</button></div>
  <pre><code>cargo install sqlx-cli --version 0.6.2
./init_db.sh</code></pre>
</div>

<h4>Passo 7: Limpar arquivos de compila√ß√£o</h4>
<div class="code-block">
  <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)" data-copy="Copiar" data-copied="Copiado!">Copiar</button></div>
  <pre><code>cargo clean</code></pre>
</div>

<h4>Passo 8: Criar um usu√°rio dedicado</h4>
<div class="code-block">
  <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)" data-copy="Copiar" data-copied="Copiado!">Copiar</button></div>
  <pre><code>adduser --disabled-login mostro</code></pre>
</div>

<h4>Passo 9: Configurar o Mostro</h4>
<div class="code-block">
  <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)" data-copy="Copiar" data-copied="Copiado!">Copiar</button></div>
  <pre><code>mkdir -p /opt/mostro
cp /opt/mostro/mostro/settings.tpl.toml /opt/mostro/settings.toml
nano /opt/mostro/settings.toml</code></pre>
</div>

<p>Edite as mesmas configura√ß√µes do Caminho A, Passo 7.</p>

<h4>Passo 10: Teste de execu√ß√£o</h4>
<div class="code-block">
  <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)" data-copy="Copiar" data-copied="Copiado!">Copiar</button></div>
  <pre><code>/usr/local/bin/mostrod -d /opt/mostro</code></pre>
</div>
<p>Se conectar ao LND e aos relays, pressione <code>Ctrl+C</code> para parar.</p>

<h4>Passo 11: Definir permiss√µes</h4>
<div class="code-block">
  <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)" data-copy="Copiar" data-copied="Copiado!">Copiar</button></div>
  <pre><code>chown -R mostro:mostro /opt/mostro</code></pre>
</div>

<h4>Passo 12: Configurar como servi√ßo do sistema</h4>
<div class="code-block">
  <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)" data-copy="Copiar" data-copied="Copiado!">Copiar</button></div>
  <pre><code>nano /etc/systemd/system/mostro.service</code></pre>
</div>

<p>Cole este conte√∫do:</p>
<div class="code-block">
  <div class="code-block-header"><span>ini</span><button class="copy-btn" onclick="copyCode(this)" data-copy="Copiar" data-copied="Copiado!">Copiar</button></div>
  <pre><code>[Unit]
Description=Mostro daemon
After=network.target

[Service]
Type=simple
User=mostro
WorkingDirectory=/home/mostro
Environment=RUST_LOG=info
ExecStart=/usr/local/bin/mostrod -d /opt/mostro
Restart=on-failure

[Install]
WantedBy=multi-user.target</code></pre>
</div>

<div class="code-block">
  <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)" data-copy="Copiar" data-copied="Copiado!">Copiar</button></div>
  <pre><code>systemctl daemon-reload
systemctl enable mostro.service
systemctl start mostro.service
systemctl status mostro.service</code></pre>
</div>

<h4>Passo 13: Verificar</h4>
<div class="code-block">
  <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)" data-copy="Copiar" data-copied="Copiado!">Copiar</button></div>
  <pre><code>ps aux | grep mostrod
journalctl -u mostro -f</code></pre>
</div>

<p>üéâ <strong>Parab√©ns!</strong> Seu n√≥ Mostro est√° funcionando como servi√ßo do sistema e reiniciar√° automaticamente ap√≥s reinicializa√ß√µes.</p>

</div>
</details>

<hr>

<h2 id="configuracao">4. Configura√ß√£o em Detalhe</h2>

<p>O arquivo <code>settings.toml</code> controla tudo sobre seu n√≥ Mostro.</p>

<h3 id="cfg-nostr">4.1 Chaves Nostr ‚Äî A identidade do seu n√≥</h3>

<div class="code-block">
  <div class="code-block-header"><span>toml</span><button class="copy-btn" onclick="copyCode(this)" data-copy="Copiar" data-copied="Copiado!">Copiar</button></div>
  <pre><code>[nostr]
nsec_privkey = 'YOUR_NSEC_PRIVATE_KEY'
relays = [
  'wss://relay.mostro.network',
  'wss://nos.lol',
  'wss://relay.nostr.band'
]</code></pre>
</div>

<p><strong>Gerando chaves Nostr:</strong></p>
<ul>
  <li><strong>rana</strong> (CLI): <code>cargo install rana && rana</code> ‚Äî <strong>Recomendado:</strong> local, seguro, suporta gera√ß√£o de chaves vanity</li>
  <li>Qualquer cliente Nostr (Damus, Amethyst, etc.) ‚Äî para casos de uso menos cr√≠ticos</li>
</ul>

<div class="callout warning">
  <div class="callout-title">üîí Nota de Seguran√ßa</div>
  Para aplica√ß√µes cr√≠ticas como n√≥s Mostro, sempre gere chaves localmente usando ferramentas como <code>rana</code>. Nunca use geradores de chaves online para infraestrutura importante.
</div>

<div class="callout tip">
  <div class="callout-title">üí° Dica</div>
  Voc√™ tamb√©m pode executar seu pr√≥prio relay Nostr junto ao Mostro (a instala√ß√£o Docker inclui um por padr√£o).
</div>

<h3 id="cfg-taxas">4.2 Taxas ‚Äî Como voc√™ gera receita</h3>

<div class="code-block">
  <div class="code-block-header"><span>toml</span><button class="copy-btn" onclick="copyCode(this)" data-copy="Copiar" data-copied="Copiado!">Copiar</button></div>
  <pre><code>[mostro]
fee = 0.006
dev_fee_percentage = 0.30</code></pre>
</div>

<p><strong>Taxa de negocia√ß√£o (<code>fee</code>):</strong> Percentual cobrado por negocia√ß√£o, dividido entre comprador e vendedor.</p>
<ul>
  <li><code>0.006</code> = 0,6% (cada parte paga 0,3%)</li>
  <li><code>0.01</code> = 1,0% (cada parte paga 0,5%)</li>
  <li><code>0</code> = gr√°tis (bom para crescer sua base de usu√°rios)</li>
</ul>

<p><strong>Taxa de desenvolvimento (<code>dev_fee_percentage</code>):</strong> Um percentual dos <em>seus</em> ganhos que vai para o desenvolvimento do Mostro.</p>
<ul>
  <li><code>0.30</code> = 30% (padr√£o) ‚Äî dos 600 sats, 180 v√£o para o fundo de desenvolvimento</li>
  <li>M√≠nimo: 10% (<code>0.10</code>), M√°ximo: 100% (<code>1.0</code>)</li>
</ul>

<div class="callout note">
  <div class="callout-title">üìù Nota</div>
  Definir <code>dev_fee_percentage</code> abaixo de <code>0.10</code> impedir√° o Mostro de iniciar.
</div>

<h3 id="cfg-limites">4.3 Limites de ordens e moedas</h3>

<div class="code-block">
  <div class="code-block-header"><span>toml</span><button class="copy-btn" onclick="copyCode(this)" data-copy="Copiar" data-copied="Copiado!">Copiar</button></div>
  <pre><code>[mostro]
max_order_amount = 1000000
min_payment_amount = 100
fiat_currencies_accepted = ['USD', 'BRL', 'EUR']</code></pre>
</div>

<ul>
  <li><strong><code>max_order_amount</code>:</strong> Maior negocia√ß√£o em satoshis. Configure baseado na capacidade dos seus canais.</li>
  <li><strong><code>min_payment_amount</code>:</strong> Negocia√ß√£o m√≠nima em satoshis.</li>
  <li><strong><code>fiat_currencies_accepted</code>:</strong> Use <a href="https://en.wikipedia.org/wiki/ISO_4217" target="_blank" rel="noopener noreferrer">c√≥digos ISO 4217</a>. Array vazio <code>[]</code> aceita todas.</li>
</ul>

<h3 id="cfg-perfil">4.4 Perfil do n√≥ (Opcional mas recomendado)</h3>

<div class="code-block">
  <div class="code-block-header"><span>toml</span><button class="copy-btn" onclick="copyCode(this)" data-copy="Copiar" data-copied="Copiado!">Copiar</button></div>
  <pre><code>[mostro]
name = "Brasil Mostro"
about = "Exchange P2P de Bitcoin para o Brasil. Suporte em portugu√™s."
picture = "https://exemplo.com/seu-logo.png"
website = "https://site-da-sua-comunidade.com"</code></pre>
</div>

<h3 id="cfg-tempos">4.5 Tempos e expira√ß√£o</h3>

<div class="code-block">
  <div class="code-block-header"><span>toml</span><button class="copy-btn" onclick="copyCode(this)" data-copy="Copiar" data-copied="Copiado!">Copiar</button></div>
  <pre><code>[mostro]
expiration_hours = 24
expiration_seconds = 900
hold_invoice_expiration_window = 300</code></pre>
</div>

<ul>
  <li><strong><code>expiration_hours</code>:</strong> Quanto tempo uma ordem fica aberta (24h padr√£o)</li>
  <li><strong><code>expiration_seconds</code>:</strong> Tempo para completar a a√ß√£o (900s = 15 min)</li>
  <li><strong><code>hold_invoice_expiration_window</code>:</strong> Validade da hold invoice (300s = 5 min)</li>
</ul>

<h3 id="cfg-antispam">4.6 Anti-Spam</h3>

<div class="code-block">
  <div class="code-block-header"><span>toml</span><button class="copy-btn" onclick="copyCode(this)" data-copy="Copiar" data-copied="Copiado!">Copiar</button></div>
  <pre><code>[mostro]
pow = 0</code></pre>
</div>

<p><strong>Proof of Work:</strong> <code>0</code> = desabilitado; <code>10-20</code> = moderado. Comece com <code>0</code>.</p>

<h3 id="cfg-rpc">4.7 Interface RPC Admin (Opcional)</h3>

<div class="code-block">
  <div class="code-block-header"><span>toml</span><button class="copy-btn" onclick="copyCode(this)" data-copy="Copiar" data-copied="Copiado!">Copiar</button></div>
  <pre><code>[rpc]
enabled = false
listen_address = "127.0.0.1"
port = 50051</code></pre>
</div>

<div class="callout warning">
  <div class="callout-title">‚ö†Ô∏è Seguran√ßa</div>
  Se habilitar RPC, mantenha <code>listen_address</code> como <code>"127.0.0.1"</code>. Nunca exponha isso √† internet.
</div>

<hr>

<h2 id="operacao">5. Operando Seu N√≥ Mostro</h2>

<h3 id="disputas">5.1 Como funcionam as disputas</h3>

<p>As disputas s√£o sua responsabilidade operacional mais importante.</p>

<p><strong>O processo de disputa:</strong></p>
<ol>
  <li><strong>Um usu√°rio abre uma disputa</strong> ‚Äî Qualquer parte pressiona "Disputa"</li>
  <li><strong>Mostro marca a ordem</strong> ‚Äî O status muda para "Disputa", os fundos permanecem bloqueados</li>
  <li><strong>Um √°rbitro assume o caso</strong> ‚Äî Um admin investiga</li>
  <li><strong>Investiga√ß√£o</strong> ‚Äî Comunica-se com ambas as partes, solicita evid√™ncias</li>
  <li><strong>Resolu√ß√£o</strong> ‚Äî O √°rbitro decide: liquidar ao vendedor, ou cancelar/reembolsar ao comprador</li>
</ol>

<div class="callout warning">
  <div class="callout-title">‚ö†Ô∏è Importante</div>
  Escolha os √°rbitros com cuidado. Eles t√™m poder de decidir para onde v√£o os fundos bloqueados. Escolha membros confi√°veis e imparciais. Recomenda-se 2‚Äì3 √°rbitros.
</div>

<h3 id="mostrix">5.2 Mostrix ‚Äî Sua ferramenta de administra√ß√£o para resolu√ß√£o de disputas</h3>

<p><a href="https://github.com/MostroP2P/mostrix" target="_blank" rel="noopener noreferrer"><strong>Mostrix</strong></a> √© um cliente de terminal (TUI) para o Mostro. Atualmente √© a <strong>√∫nica ferramenta dispon√≠vel para resolu√ß√£o de disputas</strong> por parte dos operadores de n√≥s. Se voc√™ opera um n√≥ Mostro, precisa do Mostrix.</p>

<p><strong>O que ele faz:</strong></p>
<ul>
  <li>Navegar e interagir com ordens no seu n√≥ Mostro</li>
  <li><strong>Assumir disputas</strong> ‚Äî reivindicar uma disputa para que outros admins saibam que voc√™ est√° cuidando dela</li>
  <li><strong>Conversar com ambas as partes</strong> ‚Äî comunicar-se com comprador e vendedor em uma visualiza√ß√£o dividida</li>
  <li><strong>Resolver disputas</strong> ‚Äî "Pay Buyer" (liberar sats para o comprador) ou "Refund Seller" (devolver sats ao vendedor)</li>
  <li><strong>Gerenciar solvers</strong> ‚Äî adicionar outros resolvedores de disputas pela interface de administra√ß√£o</li>
</ul>

<h4>Instala√ß√£o do Mostrix</h4>
<div class="callout warning">
  <div class="callout-title">‚ö†Ô∏è Pr√©-requisito: Rust/Cargo necess√°rio</div>
  O Mostrix deve ser compilado a partir do c√≥digo-fonte. Se voc√™ seguiu o Caminho A (Docker), pode n√£o ter o Rust instalado. Siga o <a href="#passo-2-instalar-rust">Caminho B, Passo 2</a> para instalar o Rust via rustup.
</div>
<div class="code-block">
  <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)" data-copy="Copiar" data-copied="Copiado!">Copiar</button></div>
  <pre><code><span class="cm"># Instalar depend√™ncias (Ubuntu/Debian)</span>
sudo apt update
sudo apt install -y cmake build-essential pkg-config

<span class="cm"># Clonar e compilar</span>
git clone https://github.com/MostroP2P/mostrix.git
cd mostrix
cargo build --release

<span class="cm"># Executar</span>
cargo run</code></pre>
</div>

<p>Na primeira execu√ß√£o, o Mostrix cria <code>~/.mostrix/settings.toml</code>. Edite esse arquivo para configur√°-lo.</p>

<h4>Configura√ß√£o do Mostrix em modo administrador</h4>
<div class="code-block">
  <div class="code-block-header"><span>toml</span><button class="copy-btn" onclick="copyCode(this)" data-copy="Copiar" data-copied="Copiado!">Copiar</button></div>
  <pre><code><span class="cm"># Chave p√∫blica do seu n√≥ Mostro (formato hex)</span>
mostro_pubkey = "YOUR_MOSTRO_PUBKEY_HEX"

<span class="cm"># Sua chave privada pessoal Nostr</span>
nsec_privkey = "nsec1your_personal_key"

<span class="cm"># Sua chave privada de ADMIN ‚Äî deve corresponder a uma chave solver registrada no n√≥</span>
admin_privkey = "nsec1your_admin_key"

<span class="cm"># Os relays que seu n√≥ Mostro usa</span>
relays = [
  "wss://relay.mostro.network",
  "wss://nos.lol",
  "wss://relay.nostr.band"
]

<span class="cm"># Moedas fiat que voc√™ quer ver</span>
currencies = ["USD", "EUR", "BRL"]

<span class="cm"># IMPORTANTE: Defina como "admin" para habilitar recursos de resolu√ß√£o de disputas</span>
user_mode = "admin"</code></pre>
</div>

<div class="callout tip">
  <div class="callout-title">üí° Distin√ß√£o importante</div>
  <code>nsec_privkey</code> √© sua chave pessoal Nostr (para assinar eventos). <code>admin_privkey</code> √© a chave que concede privil√©gios de administrador ‚Äî deve estar registrada como solver no n√≥ Mostro.
</div>

<h4>Resolu√ß√£o de disputas com Mostrix</h4>
<ol>
  <li><strong>Aba Disputes Pending</strong> ‚Äî Mostra todas as disputas com status "Initiated". Selecione uma e pressione <strong>Enter</strong> para assumi-la (outros admins ver√£o que voc√™ a reivindicou).</li>
  <li><strong>Aba Disputes in Progress</strong> ‚Äî Seu espa√ßo de trabalho. Cada disputa mostra:
    <ul>
      <li>Informa√ß√µes completas da disputa (comprador, vendedor, valores, moeda, avalia√ß√µes)</li>
      <li>Visualiza√ß√£o de chat dividida ‚Äî pressione <strong>Tab</strong> para alternar entre o chat do comprador e vendedor</li>
      <li>Pressione <strong>Shift+I</strong> para habilitar a entrada de chat, digite sua mensagem</li>
      <li>Use <strong>PageUp/PageDown</strong> para rolar, <strong>End</strong> para ir √† √∫ltima mensagem</li>
    </ul>
  </li>
  <li><strong>Finalizar</strong> ‚Äî Pressione <strong>Shift+F</strong> para abrir o popup de finaliza√ß√£o:
    <ul>
      <li><strong>Pay Buyer</strong> ‚Äî Liberar os sats bloqueados para o comprador (usar quando o vendedor recebeu o fiat mas n√£o libera)</li>
      <li><strong>Refund Seller</strong> ‚Äî Cancelar a hold invoice, devolvendo sats ao vendedor (usar quando o comprador n√£o pagou realmente)</li>
      <li><strong>Exit</strong> ‚Äî Fechar sem a√ß√£o se precisar de mais tempo</li>
    </ul>
  </li>
  <li>Uma vez finalizada, a disputa √© encerrada e n√£o pode ser modificada.</li>
</ol>

<div class="callout note">
  <div class="callout-title">üìù Nota</div>
  O Mostrix ainda est√° em desenvolvimento. Algumas funcionalidades como chat peer-to-peer e cancelamento cooperativo ainda n√£o foram implementadas. Mas o fluxo principal de resolu√ß√£o de disputas √© totalmente funcional.
</div>

<h3 id="watchdog">5.3 mostro-watchdog ‚Äî Notifica√ß√µes de disputas no Telegram</h3>

<p><a href="https://github.com/MostroP2P/mostro-watchdog" target="_blank" rel="noopener noreferrer"><strong>mostro-watchdog</strong></a> √© um bot de notifica√ß√£o que monitora seu n√≥ Mostro para disputas e envia alertas instant√¢neos para um grupo do Telegram. Isso √© essencial para tempos de resposta r√°pidos ‚Äî voc√™ n√£o quer ficar constantemente olhando o Mostrix esperando por disputas.</p>

<p><strong>Como funciona:</strong></p>
<div class="code-block">
  <div class="code-block-header"><span>Fluxo</span></div>
  <pre><code>Mostro daemon ‚Üí Nostr (kind 38386) ‚Üí mostro-watchdog ‚Üí Alerta no Telegram üö®</code></pre>
</div>

<p>Quando um usu√°rio abre uma disputa, seu grupo de Telegram de admins recebe uma notifica√ß√£o instant√¢nea como:</p>
<div class="code-block">
  <div class="code-block-header"><span>Alerta do Telegram</span></div>
  <pre><code>üö® NEW DISPUTE

üìã Dispute ID: abc123def456
üë§ Initiated by: buyer
‚è∞ Time: 2026-02-11 18:30:00 UTC

‚ö° Please take this dispute in Mostrix or your admin client.</code></pre>
</div>

<h4>Instala√ß√£o do mostro-watchdog</h4>
<div class="callout warning">
  <div class="callout-title">‚ö†Ô∏è Pr√©-requisito: Rust/Cargo necess√°rio</div>
  Assim como o Mostrix, o mostro-watchdog deve ser compilado a partir do c√≥digo-fonte. Certifique-se de ter o Rust instalado (<a href="#passo-2-instalar-rust">Caminho B, Passo 2</a>).
</div>
<div class="code-block">
  <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)" data-copy="Copiar" data-copied="Copiado!">Copiar</button></div>
  <pre><code>git clone https://github.com/MostroP2P/mostro-watchdog.git
cd mostro-watchdog
cargo build --release</code></pre>
</div>

<h4>Configura√ß√£o do mostro-watchdog</h4>
<div class="code-block">
  <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)" data-copy="Copiar" data-copied="Copiado!">Copiar</button></div>
  <pre><code>cp config.example.toml config.toml
nano config.toml</code></pre>
</div>

<div class="code-block">
  <div class="code-block-header"><span>toml</span><button class="copy-btn" onclick="copyCode(this)" data-copy="Copiar" data-copied="Copiado!">Copiar</button></div>
  <pre><code>[mostro]
<span class="cm"># Chave p√∫blica Nostr do seu daemon Mostro</span>
pubkey = "YOUR_MOSTRO_PUBKEY"

[nostr]
<span class="cm"># Os mesmos relays que seu daemon Mostro usa</span>
relays = ["wss://relay.mostro.network", "wss://nos.lol", "wss://relay.nostr.band"]

[telegram]
<span class="cm"># Obtenha do @BotFather no Telegram</span>
bot_token = "YOUR_BOT_TOKEN"

<span class="cm"># O ID do grupo/canal do Telegram para alertas de admin</span>
chat_id = "YOUR_CHAT_ID"</code></pre>
</div>

<p><strong>Configura√ß√£o do bot do Telegram:</strong></p>
<ol>
  <li>Envie uma mensagem para <a href="https://t.me/BotFather" target="_blank" rel="noopener noreferrer">@BotFather</a> no Telegram ‚Üí <code>/newbot</code> ‚Üí siga as instru√ß√µes</li>
  <li>Copie o token do bot para <code>config.toml</code></li>
  <li>Crie um <strong>grupo privado do Telegram</strong> para sua equipe de administra√ß√£o</li>
  <li>Adicione o bot ao grupo</li>
  <li>Obtenha o chat ID (envie uma mensagem no grupo, depois verifique <code>https://api.telegram.org/bot&lt;YOUR_TOKEN&gt;/getUpdates</code>)</li>
</ol>

<h4>Execu√ß√£o do mostro-watchdog</h4>
<div class="code-block">
  <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)" data-copy="Copiar" data-copied="Copiado!">Copiar</button></div>
  <pre><code><span class="cm"># Executar com configura√ß√£o padr√£o</span>
./target/release/mostro-watchdog

<span class="cm"># Caminho de configura√ß√£o personalizado</span>
./target/release/mostro-watchdog /path/to/config.toml

<span class="cm"># Com logging de debug</span>
RUST_LOG=mostro_watchdog=debug ./target/release/mostro-watchdog</code></pre>
</div>

<div class="callout tip">
  <div class="callout-title">üí° Dica</div>
  Execute o mostro-watchdog como um servi√ßo systemd (assim como o Mostro) para que inicie automaticamente e funcione 24/7. Seus admins nunca devem perder uma notifica√ß√£o de disputa.
</div>

<h4>O fluxo completo de disputas</h4>
<p>Juntando tudo, o fluxo completo para um operador de n√≥ √©:</p>
<ol>
  <li><strong>mostro-watchdog</strong> detecta uma nova disputa ‚Üí envia alerta no Telegram para seu grupo de admins</li>
  <li>O admin v√™ o alerta no celular/desktop</li>
  <li>O admin abre o <strong>Mostrix</strong> em modo administrador</li>
  <li>O admin vai para <strong>Disputes Pending</strong> ‚Üí assume a disputa</li>
  <li>O admin investiga via chat com comprador e vendedor em <strong>Disputes in Progress</strong></li>
  <li>O admin resolve com <strong>Pay Buyer</strong> ou <strong>Refund Seller</strong></li>
  <li>Pronto ‚Äî disputa encerrada, usu√°rios notificados automaticamente</li>
</ol>

<p>Este fluxo garante tempos de resposta r√°pidos e responsabilidade clara.</p>

<h3 id="monitoramento">5.4 Monitoramento de uptime</h3>

<div class="code-block">
  <div class="code-block-header"><span>bash ‚Äî Nativo</span><button class="copy-btn" onclick="copyCode(this)" data-copy="Copiar" data-copied="Copiado!">Copiar</button></div>
  <pre><code>systemctl status mostro.service
journalctl -u mostro -f</code></pre>
</div>

<div class="code-block">
  <div class="code-block-header"><span>bash ‚Äî Docker</span><button class="copy-btn" onclick="copyCode(this)" data-copy="Copiar" data-copied="Copiado!">Copiar</button></div>
  <pre><code>docker compose -f /opt/mostro/docker/compose.yml ps
docker compose -f /opt/mostro/docker/compose.yml logs -f mostro</code></pre>
</div>

<h3 id="atualizacao">5.5 Atualizando o Mostro</h3>

<details class="collapsible">
<summary>Atualiza√ß√£o Docker</summary>
<div class="collapsible-content">
<div class="code-block">
  <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)" data-copy="Copiar" data-copied="Copiado!">Copiar</button></div>
  <pre><code>cd /opt/mostro
git pull origin main
make docker-build
make docker-down
make docker-up</code></pre>
</div>
</div>
</details>

<details class="collapsible">
<summary>Atualiza√ß√£o nativa</summary>
<div class="collapsible-content">
<div class="code-block">
  <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)" data-copy="Copiar" data-copied="Copiado!">Copiar</button></div>
  <pre><code>cd /opt/mostro
git pull origin main
cargo build --release
install target/release/mostrod /usr/local/bin
cargo clean
cargo install sqlx-cli --version 0.6.2
sqlx migrate run
systemctl restart mostro.service</code></pre>
</div>
</div>
</details>

<div class="callout tip">
  <div class="callout-title">üí° Dica</div>
  Sempre fa√ßa backup do banco de dados antes de atualizar.
</div>

<h3 id="backups">5.6 Backups</h3>

<p>Arquivos cr√≠ticos: <code>settings.toml</code> (cont√©m sua chave privada Nostr!) e <code>mostro.db</code> (hist√≥rico de ordens, reputa√ß√µes).</p>

<div class="code-block">
  <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)" data-copy="Copiar" data-copied="Copiado!">Copiar</button></div>
  <pre><code><span class="cm"># Backup manual ‚Äî Docker (build do repo):</span>
mkdir -p /root/mostro-backups
cp /opt/mostro/docker/config/settings.toml /root/mostro-backups/settings.toml.$(date +%Y%m%d)
cp /opt/mostro/docker/config/mostro.db /root/mostro-backups/mostro.db.$(date +%Y%m%d)

<span class="cm"># Backup manual ‚Äî Docker Hub deployment:</span>
cp ~/mostro-config/settings.toml /root/mostro-backups/settings.toml.$(date +%Y%m%d)
cp ~/mostro-config/mostro.db /root/mostro-backups/mostro.db.$(date +%Y%m%d)

<span class="cm"># Backup manual ‚Äî Nativo:</span>
cp /opt/mostro/settings.toml /root/mostro-backups/settings.toml.$(date +%Y%m%d)
cp /opt/mostro/mostro.db /root/mostro-backups/mostro.db.$(date +%Y%m%d)</code></pre>
</div>

<div class="callout warning">
  <div class="callout-title">‚ö†Ô∏è Cr√≠tico</div>
  Sua <code>nsec_privkey</code> no <code>settings.toml</code> √â a identidade do seu n√≥. Se perd√™-la, perde sua reputa√ß√£o. <strong>Guarde uma c√≥pia offline.</strong>
</div>

<h3 id="atividade">5.7 Verificando a atividade de negocia√ß√µes</h3>

<div class="code-block">
  <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)" data-copy="Copiar" data-copied="Copiado!">Copiar</button></div>
  <pre><code>sqlite3 /caminho/para/mostro.db "SELECT COUNT(*) FROM orders;"
sqlite3 /caminho/para/mostro.db "SELECT id, fiat_amount, fiat_code, amount, status, created_at FROM orders WHERE status = 'success' ORDER BY created_at DESC LIMIT 10;"</code></pre>
</div>

<hr>

<h2 id="custos">6. An√°lise de Custos</h2>

<h3>Custos operacionais mensais</h3>
<div class="table-wrapper">
<table>
  <thead><tr><th>Item</th><th>Custo mensal</th><th>Notas</th></tr></thead>
  <tbody>
    <tr><td>VPS (servidor)</td><td>$10‚Äì24</td><td>Depende do provedor e especifica√ß√µes</td></tr>
    <tr><td>Nome de dom√≠nio (opcional)</td><td>$1‚Äì2</td><td>Para um site/identidade</td></tr>
    <tr><td>Taxas on-chain de canais Lightning</td><td>Vari√°vel</td><td>Abertura/fechamento de canais</td></tr>
    <tr><td><strong>Total mensal</strong></td><td><strong>$11‚Äì26</strong></td><td>Excluindo liquidez Lightning</td></tr>
  </tbody>
</table>
</div>

<h3>Potencial de receita</h3>
<div class="table-wrapper">
<table>
  <thead><tr><th>Volume mensal</th><th>Taxa (0,6%)</th><th>Taxa dev (30%)</th><th>Receita l√≠quida</th></tr></thead>
  <tbody>
    <tr><td>$1.000</td><td>~$6</td><td>~$1,80</td><td>~$4,20</td></tr>
    <tr><td>$10.000</td><td>~$60</td><td>~$18</td><td>~$42</td></tr>
    <tr><td>$50.000</td><td>~$300</td><td>~$90</td><td>~$210</td></tr>
    <tr><td>$100.000</td><td>~$600</td><td>~$180</td><td>~$420</td></tr>
  </tbody>
</table>
</div>

<div class="callout note">
  <div class="callout-title">üìù Realidade</div>
  A maioria dos novos n√≥s leva meses para construir volume. N√£o espere lucratividade imediata. O valor real muitas vezes vem de fornecer um servi√ßo √† sua comunidade.
</div>

<hr>

<h2 id="perguntas">7. Perguntas Frequentes</h2>

<details class="collapsible">
<summary>Preciso ser desenvolvedor para executar um n√≥ Mostro?</summary>
<div class="collapsible-content">
<p>N√£o, mas precisa estar confort√°vel com opera√ß√µes b√°sicas de linha de comando. O caminho Docker (Caminho A) √© projetado para ser acess√≠vel.</p>
</div>
</details>

<details class="collapsible">
<summary>Posso executar Mostro em um Raspberry Pi?</summary>
<div class="collapsible-content">
<p>Tecnicamente sim (usando Start9 ou similar), mas n√£o √© recomendado para produ√ß√£o por limita√ß√µes de CPU e RAM.</p>
</div>
</details>

<details class="collapsible">
<summary>Posso usar Core Lightning (CLN) em vez de LND?</summary>
<div class="collapsible-content">
<p>N√£o. Mostro atualmente suporta apenas LND. Suporte para outras implementa√ß√µes pode vir no futuro.</p>
</div>
</details>

<details class="collapsible">
<summary>Como os usu√°rios se conectam ao meu Mostro?</summary>
<div class="collapsible-content">
<p>Precisam de um app cliente Mostro e a chave p√∫blica do seu n√≥ (npub). Comunicam-se via relays Nostr, sem conex√£o direta necess√°ria.</p>
</div>
</details>

<details class="collapsible">
<summary>√â legal?</summary>
<div class="collapsible-content">
<p>Depende da sua jurisdi√ß√£o. Mostro √© software para trading peer-to-peer. Em algumas jurisdi√ß√µes pode exigir licen√ßas. <strong>Consulte as regulamenta√ß√µes locais e assessoria jur√≠dica.</strong></p>
</div>
</details>

<details class="collapsible">
<summary>Posso perder dinheiro executando um n√≥?</summary>
<div class="collapsible-content">
<p>Sim, √© poss√≠vel: fundos de canais em risco por bugs (raro); fechamentos for√ßados caros; custos de VPS cont√≠nuos; investimento real de tempo.</p>
</div>
</details>

<details class="collapsible">
<summary>Quando vou atingir o ponto de equil√≠brio?</summary>
<div class="collapsible-content">
<p>Com $20/m√™s de custos e 0,6% de taxa, precisa de ~$5.000/m√™s em negocia√ß√µes. A maioria das comunidades leva 3‚Äì6 meses.</p>
</div>
</details>

<hr>

<h2 id="seguranca">8. Considera√ß√µes de Seguran√ßa</h2>

<div class="callout warning">
  <div class="callout-title">‚ö†Ô∏è Aviso de software em est√°gio inicial</div>
  <p><strong>Mostro est√° em est√°gio inicial de desenvolvimento.</strong> Podem existir bugs n√£o descobertos, incluindo bugs de seguran√ßa que podem resultar em perda de fundos. <strong>Os desenvolvedores n√£o s√£o respons√°veis por perdas de dinheiro devido a bugs do software.</strong></p>
  <p>O <strong>mecanismo central de cust√≥dia usando hold invoices Lightning foi testado em batalha desde 2021</strong>, quando <a href="https://github.com/lnp2pBot/bot" target="_blank" rel="noopener noreferrer">@lnp2pBot</a> implementou pela primeira vez este tipo de cust√≥dia.</p>
</div>

<h3>Operando sob regimes autorit√°rios</h3>

<p>Se voc√™ opera em um pa√≠s com um governo autorit√°rio, <strong>a privacidade n√£o √© opcional ‚Äî √© um requisito de seguran√ßa.</strong></p>

<ol>
  <li><strong>Execute seu n√≥ Mostro atr√°s de Tor e/ou uma VPN.</strong></li>
  <li><strong>Se Tor/VPN n√£o for poss√≠vel</strong>, publique eventos apenas em relays que voc√™ controla ou confia.</li>
  <li><strong>Tenha muito cuidado com quais relays usa.</strong> No futuro, governos podem criar relays Nostr para coletar endere√ßos IP.</li>
  <li><strong>Considere tamb√©m a privacidade do seu n√≥ Lightning.</strong></li>
</ol>

<hr>

<h2 id="solucao-problemas">9. Solu√ß√£o de Problemas</h2>

<h3>Mostro n√£o inicia</h3>

<h4>"Failed to connect to LND"</h4>
<ul>
  <li>Verifique que LND est√° funcionando: <code>lncli getinfo</code></li>
  <li>Confira <code>lnd_grpc_host</code></li>
  <li>Verifique os caminhos de <code>tls.cert</code> e <code>admin.macaroon</code></li>
</ul>

<h3>Problemas de conex√£o</h3>
<ul>
  <li>Verifique as URLs dos relays (devem come√ßar com <code>wss://</code>)</li>
  <li>Certifique-se de que o firewall permite conex√µes de sa√≠da na porta 443</li>
</ul>

<h3>Obtendo ajuda</h3>
<ol>
  <li><strong>Verifique os logs primeiro</strong></li>
  <li><strong>Telegram (Desenvolvedores):</strong> <a href="https://t.me/mostro_dev" target="_blank" rel="noopener noreferrer">@mostro_dev</a></li>
  <li><strong>Telegram (Comunidade):</strong> <a href="https://t.me/MostroP2P" target="_blank" rel="noopener noreferrer">@MostroP2P</a></li>
  <li><strong>GitHub Issues:</strong> <a href="https://github.com/MostroP2P/mostro/issues" target="_blank" rel="noopener noreferrer">github.com/MostroP2P/mostro/issues</a></li>
</ol>

<hr>

<h2 id="apendice">Ap√™ndice: Refer√™ncia R√°pida</h2>

<h3>Localiza√ß√µes importantes de arquivos</h3>
<div class="table-wrapper">
<table>
  <thead><tr><th>Arquivo</th><th>Docker (build repo)</th><th>Docker Hub</th><th>Nativo</th></tr></thead>
  <tbody>
    <tr><td>Configura√ß√£o</td><td><code>/opt/mostro/docker/config/settings.toml</code></td><td><code>~/mostro-config/settings.toml</code></td><td><code>/opt/mostro/settings.toml</code></td></tr>
    <tr><td>Banco de dados</td><td><code>/opt/mostro/docker/config/mostro.db</code></td><td><code>~/mostro-config/mostro.db</code></td><td><code>/opt/mostro/mostro.db</code></td></tr>
    <tr><td>Cert LND</td><td><code>/opt/mostro/docker/config/lnd/tls.cert</code></td><td><code>~/mostro-config/lnd/tls.cert</code></td><td>Varia</td></tr>
    <tr><td>Macaroon LND</td><td><code>/opt/mostro/docker/config/lnd/admin.macaroon</code></td><td><code>~/mostro-config/lnd/admin.macaroon</code></td><td>Varia</td></tr>
    <tr><td>Arquivo de servi√ßo</td><td>N/A</td><td>N/A</td><td><code>/etc/systemd/system/mostro.service</code></td></tr>
    <tr><td>Logs</td><td><code>docker compose logs</code></td><td><code>docker logs -f mostro</code></td><td><code>journalctl -u mostro</code></td></tr>
  </tbody>
</table>
</div>

<h3>Comandos essenciais</h3>
<div class="code-block">
  <div class="code-block-header"><span>bash ‚Äî Docker</span><button class="copy-btn" onclick="copyCode(this)" data-copy="Copiar" data-copied="Copiado!">Copiar</button></div>
  <pre><code>make docker-build          <span class="cm"># Construir</span>
make docker-up             <span class="cm"># Iniciar</span>
make docker-down           <span class="cm"># Parar</span>
docker compose logs -f     <span class="cm"># Ver logs</span></code></pre>
</div>

<div class="code-block">
  <div class="code-block-header"><span>bash ‚Äî Nativo</span><button class="copy-btn" onclick="copyCode(this)" data-copy="Copiar" data-copied="Copiado!">Copiar</button></div>
  <pre><code>systemctl start mostro     <span class="cm"># Iniciar</span>
systemctl stop mostro      <span class="cm"># Parar</span>
systemctl restart mostro   <span class="cm"># Reiniciar</span>
systemctl status mostro    <span class="cm"># Status</span>
journalctl -u mostro -f    <span class="cm"># Ver logs</span></code></pre>
</div>

<h3>Configura√ß√µes recomendadas para novos n√≥s</h3>
<div class="code-block">
  <div class="code-block-header"><span>toml</span><button class="copy-btn" onclick="copyCode(this)" data-copy="Copiar" data-copied="Copiado!">Copiar</button></div>
  <pre><code>[mostro]
fee = 0.006
max_order_amount = 500000
min_payment_amount = 1000
expiration_hours = 24
expiration_seconds = 900
pow = 0
dev_fee_percentage = 0.30
fiat_currencies_accepted = ['BRL']  <span class="cm"># Mude para sua moeda local</span>

[nostr]
relays = [
  'wss://relay.mostro.network',
  'wss://nos.lol',
  'wss://relay.nostr.band'
]</code></pre>
</div>

<div class="guide-footer">
  <p>Este guia √© mantido pela comunidade Mostro. Encontrou um erro ou quer melhorar?<br>
  Contribui√ß√µes s√£o bem-vindas em <a href="https://github.com/MostroP2P/mostro" target="_blank" rel="noopener noreferrer">github.com/MostroP2P/mostro</a></p>
  <p style="margin-top:12px;">√öltima atualiza√ß√£o: Fevereiro 2026 ¬∑ Mostro v0.16.2</p>
</div>

</main>

<button class="back-to-top" id="backToTop" onclick="window.scrollTo({top:0,behavior:'smooth'})">‚Üë</button>

<script src="guide.js"></script>

</body>
</html>
