<!DOCTYPE html>
<html lang="it">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Guida alla Configurazione del Nodo | Mostro P2P</title>
  <meta name="description"
    content="Guida completa per eseguire il tuo nodo Mostro P2P per lo scambio di Bitcoin. Configurazione passo passo per Docker e compilazione nativa.">
  <link rel="stylesheet" href="guide-styles.css">
  <link rel="icon" href="../assets/images/favicon.png" type="image/png">
</head>

<body>

  <header class="guide-header">
    <a href="../index.it.html" class="header-logo">
      <img src="../assets/images/logo.svg" alt="Mostro">
      <span>Guida al Nodo</span>
    </a>
    <div class="header-right">
      <div class="lang-switcher">
        <a href="index.html">EN</a>
        <a href="index.es.html">ES</a>
        <a href="index.it.html" class="active">IT</a>
        <a href="index.pt.html">PT</a>
      </div>
      <button class="toc-toggle" onclick="toggleSidebar()">‚ò∞ Menu</button>
    </div>
  </header>

  <div class="sidebar-overlay" id="sidebarOverlay" onclick="toggleSidebar()"></div>

  <aside class="guide-sidebar" id="sidebar">
    <div class="toc-title">Indice dei Contenuti</div>
    <ul class="toc-list">
      <li><a href="#cos-e-mostro">1. Cos'√® Mostro?</a></li>
      <li class="toc-sub"><a href="#perche-nodo">Perch√© un nodo?</a></li>
      <li class="toc-sub"><a href="#come-funziona">Come funziona</a></li>
      <li><a href="#prerequisiti">2. Prerequisiti</a></li>
      <li class="toc-sub"><a href="#vps">Server (VPS)</a></li>
      <li class="toc-sub"><a href="#lnd">Nodo Lightning (LND)</a></li>
      <li class="toc-sub"><a href="#liquidita">Liquidit√†</a></li>
      <li class="toc-sub"><a href="#chiavi-nostr">Chiavi Nostr</a></li>
      <li class="toc-sub"><a href="#livello-tecnico">Livello tecnico</a></li>
      <li><a href="#installazione">3. Installazione</a></li>
      <li class="toc-sub"><a href="#percorso-a-docker">Percorso A: Docker</a></li>
      <li class="toc-sub"><a href="#percorso-b-nativo">Percorso B: Nativo</a></li>
      <li><a href="#configurazione">4. Configurazione</a></li>
      <li class="toc-sub"><a href="#cfg-nostr">Chiavi Nostr</a></li>
      <li class="toc-sub"><a href="#cfg-commissioni">Commissioni</a></li>
      <li class="toc-sub"><a href="#cfg-limiti">Limiti</a></li>
      <li class="toc-sub"><a href="#cfg-profilo">Profilo del nodo</a></li>
      <li class="toc-sub"><a href="#cfg-tempi">Tempi</a></li>
      <li class="toc-sub"><a href="#cfg-antispam">Anti-Spam</a></li>
      <li class="toc-sub"><a href="#cfg-rpc">RPC Admin</a></li>
      <li><a href="#operazioni">5. Gestione del nodo</a></li>
      <li class="toc-sub"><a href="#dispute">Dispute</a></li>
      <li class="toc-sub"><a href="#mostrix">Mostrix</a></li>
      <li class="toc-sub"><a href="#watchdog">mostro-watchdog</a></li>
      <li class="toc-sub"><a href="#monitoraggio">Monitoraggio</a></li>
      <li class="toc-sub"><a href="#aggiornamento">Aggiornamento</a></li>
      <li class="toc-sub"><a href="#backup">Backup</a></li>
      <li class="toc-sub"><a href="#attivita">Attivit√†</a></li>
      <li><a href="#costi">6. Analisi dei costi</a></li>
      <li><a href="#domande">7. Domande frequenti</a></li>
      <li><a href="#sicurezza">8. Sicurezza</a></li>
      <li><a href="#risoluzione-problemi">9. Risoluzione problemi</a></li>
      <li><a href="#appendice">Appendice</a></li>
    </ul>
  </aside>

  <main class="guide-content">

    <h1>Eseguire il Tuo Nodo Mostro</h1>
    <p class="guide-version">Mostro v0.16.2 ‚Äî Guida della Comunit√† ¬∑ Febbraio 2026</p>

    <h2 id="cos-e-mostro">1. Cos'√® Mostro e perch√© la tua comunit√† dovrebbe gestirne uno?</h2>

    <h3 id="cos-e-mostro-sub">Cos'√® Mostro?</h3>

    <p>Mostro √® un <strong>exchange peer-to-peer di Bitcoin</strong> che permette alle persone di comprare e vendere
      Bitcoin usando valute locali (dollari, euro, qualsiasi valuta) senza dover fornire documenti d'identit√† (KYC) in
      maniera completamente decentralizzata, che significa che nessuno potr√† bloccare i tuoi scambi.</p>

    <p>Funziona utilizzando :</p>
    <ul>
      <li><strong>Lightning Network</strong> ‚Äî √® lo strato software sopra bitcoin che permette pagamenti istantanei e
        con commissioni minime di scambio</li>
      <li><strong>Nostr</strong> ‚Äî un protocollo di comunicazione resistente alla censura basato su relay che chiunque
        pu√≤ installare e gestire.</li>
    </ul>

    <p>Mostro fa da garante tra compratore e venditore, mantenendo i Bitcoin del venditore in una "cassaforte" temporanea
      (chiamata hold invoice) fino a quando l'acquirente conferma di aver inviato il pagamento in valuta locale. Mostro
      non controlla mai i fondi di nessuno; li trattiene solo brevemente durante lo scambio.</p>

    <h3 id="perche-nodo">Perch√© la tua comunit√† vorrebbe gestire un nodo Mostro?</h3>

    <ol>
      <li><strong>Entrate dalle commissioni</strong> ‚Äî Ogni scambio completato richiede una piccola commissione (0,6% di
        default). Se la tua comunit√† effettua $10.000 di scambi mensili, avrete circa $60/mese in commissioni.</li>
      <li><strong>Trading P2P senza KYC</strong> ‚Äî I membri della tua comunit√† possono comprare e vendere Bitcoin senza
        fornire documenti d'identit√†. Particolarmente importante in regioni con valute instabili o regolamentazioni
        restrittive.</li>
      <li><strong>Dispute nella tua lingua</strong> ‚Äî Quando uno scambio non va a buon fine, grazie alle comunit√† verrai
        supportato nella <em>tua</em> lingua e da persone che utilizzano gli stessi mezzi di pagamento.</li>
      <li><strong>Indipendenza</strong> ‚Äî Nessuna azienda pu√≤ chiudere il tuo exchange. Nessun governo pu√≤ fare
        pressione su un singolo operatore.</li>
      <li><strong>Personalizzazione</strong> ‚Äî Tu scegli quali valute supportare, quali metodi di pagamento permettere e
        quali commissioni applicare.</li>
    </ol>

    <h3 id="come-funziona">Come funziona Mostro (Semplificato)</h3>

    <div class="flow-diagram">
      <span class="step-num">1.</span> Alice vuole VENDERE Bitcoin per $50 USD
      <span class="arrow">‚Üí</span> Crea un ordine su Mostro

      <span class="step-num">2.</span> Bob vuole COMPRARE Bitcoin con $50 USD
      <span class="arrow">‚Üí</span> Vede l'ordine di Alice e lo accetta

      <span class="step-num">3.</span> Mostro crea la "cassaforte" (hold invoice)
      <span class="arrow">‚Üí</span> Alice invia i suoi Bitcoin nella cassaforte

      <span class="step-num">4.</span> Bob invia $50 ad Alice tramite bonifico, Zelle, contanti, ecc.
      <span class="arrow">‚Üí</span> Bob conferma nella app l'invio del denaro

      <span class="step-num">5.</span> Alice conferma di aver ricevuto i $50
      <span class="arrow">‚Üí</span> Alice confermando la ricezione del denaro

      <span class="step-num">6.</span> Mostro rilascia i Bitcoin dalla cassaforte a Bob
      <span class="arrow">‚Üí</span> Scambio completato! <span class="check">‚úì</span>
    </div>

    <p>Se qualcosa va storto (es: Bob dice di aver pagato ma Alice non ha ricevuto), una delle parti pu√≤ aprire una
      <strong>disputa</strong>, e i gestori della tua comunit√† indagano e risolvono il problema a favore della persona
      danneggiata.</p>

    <hr>

    <h2 id="prerequisiti">2. Prerequisiti ‚Äî Cosa ti serve prima di iniziare</h2>

    <h3 id="vps">2.1 Un Server (VPS)</h3>

    <p>Un <strong>VPS</strong> (Virtual Private Server) √® un computer in un data center che funziona 24/7. Ne affitterai
      uno per ospitare il tuo nodo Mostro.</p>

    <p><strong>Specifiche minime:</strong></p>
    <div class="table-wrapper">
      <table>
        <thead>
          <tr>
            <th>Risorsa</th>
            <th>Minimo</th>
            <th>Consigliato</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>CPU</td>
            <td>2 vCPU (condivise)</td>
            <td>2+ vCPU</td>
          </tr>
          <tr>
            <td>RAM</td>
            <td>2 GB</td>
            <td>4 GB</td>
          </tr>
          <tr>
            <td>Storage</td>
            <td>60 GB SSD</td>
            <td>100 GB SSD</td>
          </tr>
          <tr>
            <td>Banda</td>
            <td>3 TB/mese</td>
            <td>3+ TB/mese</td>
          </tr>
          <tr>
            <td>SO</td>
            <td>Ubuntu 22.04+ LTS</td>
            <td>Ubuntu 24.04 LTS</td>
          </tr>
        </tbody>
      </table>
    </div>

    <p><strong>Costo mensile stimato:</strong> $10‚Äì$24/mese.</p>

    <p><strong>Provider VPS popolari:</strong></p>
    <ul>
      <li><a href="https://www.hostinger.com/" target="_blank" rel="noopener noreferrer">Hostinger</a> ‚Äî da ~$7/mese (prezzo promozionale; il rinnovo potrebbe essere pi√π alto) (KVM 2: 2 vCPU, 8GB RAM, 100GB NVMe, 8TB bandwidth) ¬∑ Accetta Bitcoin</li>
      <li><a href="https://www.hetzner.com/" target="_blank" rel="noopener noreferrer">Hetzner</a> ‚Äî ‚Ç¨3.49-8/mese (CX23 da ‚Ç¨3.49, ottimo
        rapporto qualit√†-prezzo, basato in UE)</li>
      <li><a href="https://www.digitalocean.com/" target="_blank" rel="noopener noreferrer">Digital Ocean</a> ‚Äî $24/mese (4GB RAM, 2 CPU, 80GB SSD) o $32/mese (4GB RAM, 2 Intel CPU, 120GB NVMe)</li>
      <li><a href="https://www.ovhcloud.com/" target="_blank" rel="noopener noreferrer">OVH</a> ‚Äî ~$6-12/mese</li>
      <li><a href="https://www.linode.com/" target="_blank" rel="noopener noreferrer">Linode/Akamai</a> ‚Äî $12/mese</li>
      <li><a href="https://www.lunanode.com/" target="_blank" rel="noopener noreferrer">Lunanode</a> ‚Äî Accetta pagamenti
        in Bitcoin</li>
    </ul>

    <div class="callout tip">
      <div class="callout-title">üí° Suggerimento</div>
      Molti provider VPS accettano pagamenti in Bitcoin. Cerca questa opzione se vuoi restare coerente con la filosofia
      Bitcoin.<br>
      <a href="https://kycnot.me/?categories=vps" target="_blank" rel="noopener noreferrer"> KycNotme VPS</a> - questo
      link mostra alcuni provider VPS che accettano bitcoin
    </div>

    <p>Per completare l'installazione serve un minimo di capacit√† nell'uso di un terminale linux e del protocollo SSH.
      In ogni caso ci sono molti tutorial a riguardo ed √® molto semplice imparare i comandi base necessari per
      installare Mostro.</p>

    <h3 id="lnd">2.2 Un Nodo Lightning Network (LND)</h3>

    <p>Lightning Network √® un "layer 2" costruito su Bitcoin che permette pagamenti veloci ed economici. Per far
      funzionare Mostro, ti serve un <strong>nodo LND</strong> (Lightning Network Daemon) ‚Äî la versione di Lightning con
      cui funziona Mostro.</p>

    <p><strong>Le tue opzioni:</strong></p>
    <div class="table-wrapper">
      <table>
        <thead>
          <tr>
            <th>Opzione</th>
            <th>Difficolt√†</th>
            <th>Costo</th>
            <th>Note</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Usare un nodo LND esistente</td>
            <td><span class="badge badge-easy">Facile</span></td>
            <td>Gratuito (se ne hai uno)</td>
            <td>Meglio se qualcuno ne ha gi√† uno</td>
          </tr>
          <tr>
            <td>Eseguire LND sullo stesso VPS</td>
            <td><span class="badge badge-hard">Difficile</span></td>
            <td>Stesso VPS + liquidit√†</td>
            <td>Richiede VPS con 4GB+ RAM</td>
          </tr>
          <tr>
            <td>Soluzione nodo-in-scatola</td>
            <td><span class="badge badge-medium">Medio</span></td>
            <td>$200-600 + liquidit√†</td>
            <td><a href="https://start9.com/" target="_blank" rel="noopener noreferrer">Start9</a>, <a
                href="https://umbrel.com/" target="_blank" rel="noopener noreferrer">Umbrel</a>, <a
                href="https://raspiblitz.org/" target="_blank" rel="noopener noreferrer">RaspiBlitz</a></td>
          </tr>
          <tr>
            <td>StartOS con pacchetto Mostro</td>
            <td><span class="badge badge-easy">Molto facile</span></td>
            <td>$300-600 + liquidit√†</td>
            <td>Start9 ha un pacchetto Mostro che si installa con un click </td>
          </tr>
          <tr>
            <td>Usare Voltage.cloud</td>
            <td><span class="badge badge-easy">Facile</span></td>
            <td>Da ~$20/mese + liquidit√†</td>
            <td><a href="https://voltage.cloud/" target="_blank" rel="noopener noreferrer">Voltage</a> ‚Äî LND ospitato
              con infrastruttura gestita</td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="callout warning">
      <div class="callout-title">‚ö†Ô∏è Importante</div>
      Mostro richiede specificamente <strong>LND</strong> (non CLN/Core Lightning, non Eclair, non LDK). Assicurati che
      il tuo nodo Lightning utilizzi LND.
    </div>

    <p><strong>Cosa ti serve nel tuo nodo LND:</strong></p>
    <ul>
      <li>Il file <code>tls.cert</code> (un certificato di sicurezza)</li>
      <li>Il file <code>admin.macaroon</code> (un token di autenticazione)</li>
      <li>L'indirizzo gRPC (tipicamente <code>https://127.0.0.1:10009</code> se sulla stessa macchina)</li>
    </ul>

    <h3 id="liquidita">2.3 Liquidit√† Lightning</h3>

    <p>Per facilitare gli scambi, il tuo nodo Lightning ha bisogno di <strong>canali</strong> con dei Bitcoin al loro
      interno. Pensa ai canali Lightning come tunnel di pagamento pre-finanziati. I Bitcoin all'interno di questi canali
      sono la tua "liquidit√†".</p>

    <p><strong>Quanta ne serve?</strong></p>
    <div class="table-wrapper">
      <table>
        <thead>
          <tr>
            <th>Volume di trading obiettivo</th>
            <th>Liquidit√† suggerita</th>
            <th>BTC approssimativo</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Comunit√† piccola (pochi scambi/giorno)</td>
            <td>1‚Äì5 milioni di sats</td>
            <td>0,01‚Äì0,05 BTC</td>
          </tr>
          <tr>
            <td>Comunit√† media</td>
            <td>5‚Äì20 milioni di sats</td>
            <td>0,05‚Äì0,20 BTC</td>
          </tr>
          <tr>
            <td>Comunit√† attiva</td>
            <td>20‚Äì100 milioni di sats</td>
            <td>0,20‚Äì1,0 BTC</td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="callout tip">
      <div class="callout-title">üí° Nota sulla Liquidit√† Lightning</div>
      I Bitcoin nei tuoi canali Lightning sono bloccati <strong>onchain</strong> ma rimangono altamente spendibili via Lightning Network. Molti servizi accettano pagamenti Lightning ‚Äî dalle caffetterie ai provider VPS ‚Äî rendendo la tua liquidit√† abbastanza flessibile per uso quotidiano.
    </div>

    <p><strong>Inizia in piccolo, cresci gradualmente.</strong> Inizia con il necessario per le esigenze iniziali della
      tua comunit√† e monitora il feedback. Quando i trader segnalano ordini falliti per capacit√† insufficiente, quello √®
      il segnale per aggiungerne di pi√π.</p>

    <p><strong>Ottenere liquidit√†:</strong></p>
    <ul>
      <li>Apri canali verso nodi ben connessi (usa <a href="https://1ml.com/" target="_blank"
          rel="noopener noreferrer">1ML</a> o <a href="https://amboss.space/" target="_blank"
          rel="noopener noreferrer">Amboss</a> per trovare buoni peer)</li>
      <li>Ti serve sia capacit√† <strong>in uscita</strong> (per pagare gli acquirenti) che capacit√† <strong>in
          entrata</strong> (per ricevere dai venditori)</li>
      <li>Ottenere liquidit√† in entrata √® spesso la parte pi√π difficile ‚Äî considera <a
          href="https://lightning.engineering/loop/" target="_blank" rel="noopener noreferrer">Lightning Loop</a>, <a
          href="https://amboss.space/magma" target="_blank" rel="noopener noreferrer">Magma</a>, o servizi di swap di
        canali</li>
    </ul>

    <h3 id="chiavi-nostr">2.4 Chiavi Nostr</h3>

    <p>Il tuo nodo Mostro ha bisogno di una propria identit√† sulla rete di Nostr ‚Äî una coppia di chiavi crittografiche con
      una chiave pubblica (l'indirizzo del tuo nodo) e una chiave privata (il tuo segreto).</p>

    <div class="callout warning">
      <div class="callout-title">‚ö†Ô∏è Importante</div>
      Non riutilizzare mai le chiavi Nostr tra istanze di Mostro. Ogni nodo ha bisogno della propria identit√† unica.
    </div>

    <p><strong>Generare chiavi Nostr sicure localmente con rana:</strong></p>

    <div class="code-block">
      <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)"
          data-copy="Copia" data-copied="Copiato!">Copia</button></div>
      <pre><code><span class="cm"># Installare Rust (se non gi√† installato)</span>
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
source ~/.cargo/env

<span class="cm"># Installare rana - generatore locale di chiavi Nostr</span>
cargo install rana

<span class="cm"># Generare una nuova coppia di chiavi</span>
rana</code></pre>
    </div>

    <p>Rana generer√† sia la tua chiave privata (nsec) che la tua chiave pubblica (npub). <strong>Salva entrambe in modo sicuro!</strong> Non generare mai chiavi importanti come queste usando servizi online ‚Äî usa sempre strumenti locali come rana per la sicurezza.</p>

    <h3 id="livello-tecnico">2.5 Livello di conoscenza tecnica</h3>

    <div class="table-wrapper">
      <table>
        <thead>
          <tr>
            <th>Attivit√†</th>
            <th>Difficolt√†</th>
            <th>Competenze necessarie</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Affittare un VPS</td>
            <td><span class="badge badge-easy">Facile</span></td>
            <td>Carta di credito, navigazione web base</td>
          </tr>
          <tr>
            <td>Connettersi via SSH</td>
            <td><span class="badge badge-easy">Facile</span></td>
            <td>Seguire istruzioni, digitare comandi da terminale</td>
          </tr>
          <tr>
            <td>Installare Docker</td>
            <td><span class="badge badge-medium">Medio</span></td>
            <td>Copia-incolla di comandi, risoluzione problemi base</td>
          </tr>
          <tr>
            <td>Eseguire Mostro (Docker)</td>
            <td><span class="badge badge-medium">Medio</span></td>
            <td>Modificare file di configurazione, capire i percorsi</td>
          </tr>
          <tr>
            <td>Eseguire Mostro (nativo)</td>
            <td><span class="badge badge-hard">Difficile</span></td>
            <td>Amministrazione Linux, compilazione software, systemd</td>
          </tr>
          <tr>
            <td>Configurare LND da zero</td>
            <td><span class="badge badge-hard">Difficile</span></td>
            <td>Conoscenza significativa di Linux e reti</td>
          </tr>
          <tr>
            <td>Gestire liquidit√† Lightning</td>
            <td><span class="badge badge-hard">Difficile</span></td>
            <td>Utilizzo e bilanciamento dei dei canali Lightning</td>
          </tr>
        </tbody>
      </table>
    </div>

    <p><strong>Il nostro consiglio:</strong> Se la tua comunit√† ha qualcuno a proprio agio con la riga di comando Linux,
      pu√≤ gestire l'installazione Docker (Percorso A). Per il Percorso B, serve qualcuno con esperienza di
      amministrazione di sistema. La configurazione del nodo Lightning √® la parte pi√π complessa ‚Äî considera di farti
      aiutare da qualcuno esperto, o di usare una soluzione pronta all'uso.</p>

    <hr>

    <h2 id="installazione">3. Installazione guidata</h2>

    <p>Scegli il tuo percorso:</p>
    <ul>
      <li><strong>Percorso A (Docker):</strong> Pi√π semplice, meno passaggi, aggiornamenti pi√π facili. Consigliato per
        la maggior parte.</li>
      <li><strong>Percorso B (Compilazione nativa):</strong> Pi√π controllo, meglio per amministratori di sistema esperti.</li>
    </ul>

    <p>Entrambi i percorsi presuppongono che tu abbia gi√†: ‚úÖ Un VPS con Ubuntu ¬∑ ‚úÖ Accesso SSH ¬∑ ‚úÖ Un nodo LND
      funzionante.</p>

    <details class="collapsible" id="percorso-a-docker" open>
      <summary>Percorso A: Installazione Docker (Consigliata per principianti)</summary>
      <div class="collapsible-content">

        <h4>Passo 1: Connettiti al tuo VPS</h4>
        <div class="code-block">
          <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)"
              data-copy="Copia" data-copied="Copiato!">Copia</button></div>
          <pre><code>ssh root@INDIRIZZO_IP_DEL_TUO_VPS</code></pre>
        </div>

        <h4>Passo 2: Aggiorna il sistema</h4>
        <div class="code-block">
          <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)"
              data-copy="Copia" data-copied="Copiato!">Copia</button></div>
          <pre><code><span class="cm"># Scarica le ultime informazioni sui pacchetti</span>
apt update

<span class="cm"># Installa tutti gli aggiornamenti disponibili</span>
apt upgrade -y</code></pre>
        </div>

        <h4>Passo 3: Installare Docker e Docker Compose</h4>
        <div class="code-block">
          <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)"
              data-copy="Copia" data-copied="Copiato!">Copia</button></div>
          <pre><code><span class="cm"># Installa Docker con lo script ufficiale</span>
curl -fsSL https://get.docker.com | sh

<span class="cm"># Verifica che Docker sia installato</span>
docker --version

<span class="cm"># Verifica Docker Compose</span>
docker compose version</code></pre>
        </div>

        <h4>Passo 4: Installare strumenti aggiuntivi</h4>
        <div class="code-block">
          <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)"
              data-copy="Copia" data-copied="Copiato!">Copia</button></div>
          <pre><code>apt install -y git make</code></pre>
        </div>

        <h4>Passo 5: Scaricare Mostro</h4>
        <div class="code-block">
          <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)"
              data-copy="Copia" data-copied="Copiato!">Copia</button></div>
          <pre><code>cd /opt
git clone https://github.com/MostroP2P/mostro.git
cd mostro</code></pre>
        </div>

        <h4>Passo 6: Configurare i file</h4>
        <div class="code-block">
          <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)"
              data-copy="Copia" data-copied="Copiato!">Copia</button></div>
          <pre><code>cd docker
mkdir -p config
cp ../settings.tpl.toml config/settings.toml</code></pre>
</div>

<div class="callout tip">
  <div class="callout-title">üí° Modifiche in v0.16.2+</div>
  <ul>
    <li>Non pi√π <code>empty.mostro.db</code> ‚Äî Mostro crea il database automaticamente</li>
    <li><code>settings.docker.toml</code> ‚Üí <code>settings.tpl.toml</code> (nome del template cambiato)</li>
    <li>Non pi√π file <code>.env</code> ‚Äî le variabili d'ambiente vengono passate direttamente al comando di build</li>
  </ul>
</div>
        </div>

        <h4>Passo 7: Modificare il file di configurazione</h4>
        <div class="code-block">
          <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)"
              data-copy="Copia" data-copied="Copiato!">Copia</button></div>
          <pre><code>nano config/settings.toml</code></pre>
        </div>

        <p><strong>Devi</strong> configurare questi campi chiave:</p>
        <ol>
          <li><strong><code>lnd_grpc_host</code></strong> ‚Äî L'indirizzo del tuo nodo LND:
            <ul>
              <li>Stessa macchina: <code>'https://host.docker.internal:10009'</code></li>
              <li>Macchina diversa: <code>'https://TUO_IP_LND:10009'</code></li>
            </ul>
          </li>
          <li><strong><code>lnd_cert_file</code></strong> e <strong><code>lnd_macaroon_file</code></strong> ‚Äî Configurali come:
            <ul>
              <li><code>lnd_cert_file = '/config/lnd/tls.cert'</code></li>
              <li><code>lnd_macaroon_file = '/config/lnd/admin.macaroon'</code></li>
            </ul>
          </li>
          <li><strong><code>nsec_privkey</code></strong> ‚Äî La chiave privata Nostr del tuo Mostro. Generala localmente con
            <code>rana</code> (vedi sezione 2.4). <strong>Salva sia la nsec che la npub in modo sicuro!</strong></li>
          <li><strong><code>relays</code></strong> ‚Äî I relay Nostr a cui il tuo nodo si connetter√†.</li>
          <li><strong><code>url</code></strong> (nella sezione [database]) ‚Äî Configuralo come: <code>"sqlite:///config/mostro.db"</code></li>
        </ol>

        <p><strong>Altre personalizzazioni che puoi fare al tuo nodo:</strong></p>
        <div class="code-block">
          <div class="code-block-header"><span>toml</span><button class="copy-btn" onclick="copyCode(this)"
              data-copy="Copia" data-copied="Copiato!">Copia</button></div>
          <pre><code>[mostro]
fee = 0.006                    <span class="cm"># 0,6% commissione per scambio</span>
max_order_amount = 1000000     <span class="cm"># Ordine massimo in sats (~$400-500)</span>
min_payment_amount = 100       <span class="cm"># Ordine minimo in sats</span>
fiat_currencies_accepted = ['USD', 'EUR']  <span class="cm"># Le tue valute</span>

[database]
url = "sqlite:///config/mostro.db"  <span class="cm"># Percorso database nel container</span></code></pre>
        </div>

        <p>Salva: <code>Ctrl+X</code>, poi <code>Y</code>, poi <code>Invio</code>.</p>

        <h4>Passo 8: Costruire l'immagine Docker</h4>

        <p>Devi fornire le variabili d'ambiente <code>LND_CERT_FILE</code> e <code>LND_MACAROON_FILE</code> che puntano ai tuoi file LND. Questi verranno copiati in <code>config/lnd/</code> durante la costruzione.</p>

        <div class="callout warning">
          <div class="callout-title">üìÅ Directory di lavoro</div>
          Torna alla directory radice del repository prima di eseguire i comandi make:
        </div>

        <p><strong>Linux/macOS:</strong></p>
        <div class="code-block">
          <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)"
              data-copy="Copia" data-copied="Copiato!">Copia</button></div>
          <pre><code>cd ..
LND_CERT_FILE=~/.polar/networks/1/volumes/lnd/alice/tls.cert \
LND_MACAROON_FILE=~/.polar/networks/1/volumes/lnd/alice/data/chain/bitcoin/regtest/admin.macaroon \
make docker-build</code></pre>
        </div>

        <p><strong>Windows PowerShell:</strong></p>
        <div class="code-block">
          <div class="code-block-header"><span>powershell</span><button class="copy-btn" onclick="copyCode(this)"
              data-copy="Copia" data-copied="Copiato!">Copia</button></div>
          <pre><code>cd ..
$env:LND_CERT_FILE="C:\Users\TuoUtente\.polar\networks\1\volumes\lnd\alice\tls.cert"
$env:LND_MACAROON_FILE="C:\Users\TuoUtente\.polar\networks\1\volumes\lnd\alice\data\chain\bitcoin\regtest\admin.macaroon"
make docker-build</code></pre>
        </div>

        <p><strong>Alternativa:</strong> Esporta le variabili per la tua sessione:</p>
        <div class="code-block">
          <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)"
              data-copy="Copia" data-copied="Copiato!">Copia</button></div>
          <pre><code>cd ..
export LND_CERT_FILE=~/.polar/networks/1/volumes/lnd/alice/tls.cert
export LND_MACAROON_FILE=~/.polar/networks/1/volumes/lnd/alice/data/chain/bitcoin/regtest/admin.macaroon
make docker-build</code></pre>
        </div>

        <p>Se LND √® sulla <strong>stessa macchina</strong>, i percorsi tipici sono:</p>
        <ul>
          <li><code>/root/.lnd/tls.cert</code></li>
          <li><code>/root/.lnd/data/chain/bitcoin/mainnet/admin.macaroon</code></li>
        </ul>

        <p>Se LND √® su una <strong>macchina diversa</strong>, copia i file sul tuo sistema locale prima, poi punta le variabili d'ambiente a quelle copie locali.</p>

        <h4>Passo 9: Impostare Password Database (Opzionale)</h4>
        <p>Per la modalit√† non interattiva (eseguendo <code>docker compose up -d</code>), imposta <code>MOSTRO_DB_PASSWORD</code> in <code>docker/.env</code>:</p>

        <div class="callout warning">
          <div class="callout-title">üîí Avviso di Sicurezza</div>
          Il repository include gi√† <code>docker/.env</code> nel <code>.gitignore</code> per evitare di committare accidentalmente credenziali sensibili nel controllo versione.
        </div>

        <div class="code-block">
          <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)"
              data-copy="Copia" data-copied="Copiato!">Copia</button></div>
          <pre><code><span class="cm"># Crea file docker/.env</span>
nano docker/.env</code></pre>
        </div>

        <p>Aggiungi una di queste opzioni:</p>

        <div class="code-block">
          <div class="code-block-header"><span>dotenv</span><button class="copy-btn" onclick="copyCode(this)"
              data-copy="Copia" data-copied="Copiato!">Copia</button></div>
          <pre><code><span class="cm"># Usa una password forte per abilitare la crittografia DB</span>
MOSTRO_DB_PASSWORD='Str0ngPassw0rd!'</code></pre>
        </div>

        <div class="code-block">
          <div class="code-block-header"><span>dotenv</span><button class="copy-btn" onclick="copyCode(this)"
              data-copy="Copia" data-copied="Copiato!">Copia</button></div>
          <pre><code><span class="cm"># O impostalo vuoto per saltare la crittografia DB</span>
MOSTRO_DB_PASSWORD=</code></pre>
        </div>

        <h4>Passo 10: Avviare Mostro</h4>
        <div class="code-block">
          <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)"
              data-copy="Copia" data-copied="Copiato!">Copia</button></div>
          <pre><code><span class="cm"># Avvia Mostro e il relay Nostr locale</span>
make docker-up</code></pre>
        </div>

        <p>Verifica che tutto funzioni:</p>
        <div class="code-block">
          <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)"
              data-copy="Copia" data-copied="Copiato!">Copia</button></div>
          <pre><code>docker compose -f compose.yml ps</code></pre>
        </div>

        <h4>Passo 11: Controllare i log</h4>
        <div class="code-block">
          <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)"
              data-copy="Copia" data-copied="Copiato!">Copia</button></div>
          <pre><code>docker compose -f compose.yml logs -f mostro</code></pre>
        </div>

        <p>Cerca questi messaggi:</p>
        <ul>
          <li><code>Settings correctly loaded</code> ‚Äî Configurazione valida</li>
          <li><code>Connected to LND</code> ‚Äî Connessione Lightning riuscita</li>
          <li><code>Connected to relay</code> ‚Äî Relay Nostr stabilito</li>
        </ul>

        <h4>Arrestare e riavviare</h4>
        <div class="code-block">
          <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)"
              data-copy="Copia" data-copied="Copiato!">Copia</button></div>
          <pre><code>make docker-down   <span class="cm"># Arresta</span>
make docker-up     <span class="cm"># Avvia</span></code></pre>
        </div>

        <p>üéâ <strong>Congratulazioni!</strong> Se vedi connessioni riuscite nei log, il tuo nodo Mostro √® in funzione!
        </p>

        <hr>

        <h4>Risoluzione dei Problemi Comuni di Docker</h4>

        <details class="collapsible" id="risoluzione-problemi-docker">
          <summary><strong>Problemi Frequenti e Soluzioni</strong></summary>
          <div class="collapsible-content">

            <h5>‚ùå Errore: Permission denied (os error 13)</h5>

            <div class="callout warning">
              <div class="callout-title">üõ†Ô∏è Problema di Permessi Database</div>
              SQLite necessita permessi di scrittura sia per il file database che per la directory padre per creare file temporanei (<code>.db-wal</code>, <code>.db-shm</code>).
            </div>

            <p><strong>Soluzione Veloce:</strong></p>
            <div class="code-block">
              <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)"
                  data-copy="Copia" data-copied="Copiato!">Copia</button></div>
              <pre><code><span class="cm"># Correggere i permessi prima di avviare</span>
sudo chown -R 1000:1000 ./config/
sudo chmod -R 755 ./config/

<span class="cm"># Poi avviare normalmente</span>
make docker-up</code></pre>
            </div>

            <p><strong>Soluzione Permanente in docker-compose.yml:</strong></p>
            <div class="code-block">
              <div class="code-block-header"><span>yaml</span><button class="copy-btn" onclick="copyCode(this)"
                  data-copy="Copia" data-copied="Copiato!">Copia</button></div>
              <pre><code>services:
  mostro:
    # ... configurazione esistente ...
    user: "1000:1000"  # Eseguire come utente non-root
    volumes:
      - ./config:/config:rw  # Assicurare accesso lettura-scrittura</code></pre>
            </div>

            <h5>‚ùå Errore: No such device or address (os error 6)</h5>

            <div class="callout warning">
              <div class="callout-title">üñ•Ô∏è Problema di Prompt Password</div>
              Mostro richiede password database interattivamente, ma i container Docker non hanno TTY per default.
            </div>

            <p><strong>Opzione 1: Saltare Crittografia Database (Pi√π Veloce per Test)</strong></p>
            <div class="code-block">
              <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)"
                  data-copy="Copia" data-copied="Copiato!">Copia</button></div>
              <pre><code><span class="cm"># Impostare password vuota per saltare crittografia</span>
MOSTRO_DB_PASSWORD="" make docker-up</code></pre>
            </div>

            <p><strong>Opzione 2: Impostare Password via Variabile Ambiente</strong></p>
            <div class="code-block">
              <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)"
                  data-copy="Copia" data-copied="Copiato!">Copia</button></div>
              <pre><code><span class="cm"># Impostare password in modo sicuro</span>
MOSTRO_DB_PASSWORD="la-tua-password-sicura" make docker-up</code></pre>
            </div>

            <p><strong>Opzione 3: Abilitare Modalit√† Interattiva in docker-compose.yml</strong></p>
            <div class="code-block">
              <div class="code-block-header"><span>yaml</span><button class="copy-btn" onclick="copyCode(this)"
                  data-copy="Copia" data-copied="Copiato!">Copia</button></div>
              <pre><code>services:
  mostro:
    # ... configurazione esistente ...
    tty: true        # Abilitare TTY per prompt interattivi
    stdin_open: true # Abilitare STDIN
    environment:
      - MOSTRO_DB_PASSWORD=${DB_PASSWORD:-}  # Opzionale: impostare via .env</code></pre>
            </div>

            <h5>‚ùå Problemi di creazione file database</h5>

            <p><strong>Assicurare struttura directory corretta:</strong></p>
            <div class="code-block">
              <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)"
                  data-copy="Copia" data-copied="Copiato!">Copia</button></div>
              <pre><code><span class="cm"># Creare directory con permessi appropriati</span>
mkdir -p docker/config
sudo chown -R $(id -u):$(id -g) docker/config
chmod 755 docker/config

<span class="cm"># Verificare permessi</span>
ls -la docker/config/</code></pre>
            </div>

            <p><strong>Passaggi di debug:</strong></p>
            <div class="code-block">
              <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)"
                  data-copy="Copia" data-copied="Copiato!">Copia</button></div>
              <pre><code><span class="cm"># Controllare utente del container</span>
docker compose exec mostro whoami

<span class="cm"># Controllare permessi directory montata dentro il container</span>
docker compose exec mostro ls -la /config

<span class="cm"># Correggere permessi da host (pi√π sicuro che dentro il container)</span>
sudo chown -R 1000:1000 ./config/</code></pre>
            </div>

          </div>
        </details>

        <hr>

        <h4>Alternativa: Esecuzione da Docker Hub (Senza Necessit√† di Compilazione)</h4>

        <div class="callout tip">
          <div class="callout-title">üöÄ Novit√† in v0.16.2+</div>
          Ora puoi eseguire Mostro direttamente da Docker Hub senza clonare il repository o compilare localmente. Perfetto per deployment su VPS!
        </div>

        <p><strong>Passi per deployment su VPS:</strong></p>

        <h5>1. Creare una directory di configurazione</h5>
        <div class="code-block">
          <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)"
              data-copy="Copia" data-copied="Copiato!">Copia</button></div>
          <pre><code>mkdir -p ~/mostro-config/lnd</code></pre>
        </div>

        <h5>2. Ottenere il template di configurazione</h5>
        <div class="code-block">
          <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)"
              data-copy="Copia" data-copied="Copiato!">Copia</button></div>
          <pre><code>curl -sL https://raw.githubusercontent.com/MostroP2P/mostro/main/settings.tpl.toml -o ~/mostro-config/settings.toml</code></pre>
        </div>

        <h5>3. Copiare le tue credenziali LND</h5>
        <div class="code-block">
          <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)"
              data-copy="Copia" data-copied="Copiato!">Copia</button></div>
          <pre><code>cp /percorso/al/tuo/tls.cert ~/mostro-config/lnd/tls.cert
cp /percorso/al/tuo/admin.macaroon ~/mostro-config/lnd/admin.macaroon</code></pre>
        </div>

        <h5>4. Modificare la configurazione</h5>
        <div class="code-block">
          <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)"
              data-copy="Copia" data-copied="Copiato!">Copia</button></div>
          <pre><code>nano ~/mostro-config/settings.toml</code></pre>
        </div>

        <p><strong>Modifiche richieste per deployment Docker Hub:</strong></p>
        <div class="code-block">
          <div class="code-block-header"><span>toml</span><button class="copy-btn" onclick="copyCode(this)"
              data-copy="Copia" data-copied="Copiato!">Copia</button></div>
          <pre><code>[lightning]
lnd_cert_file = '/config/lnd/tls.cert'
lnd_macaroon_file = '/config/lnd/admin.macaroon'
lnd_grpc_host = 'https://host.docker.internal:10009'  <span class="cm"># Se LND sullo stesso VPS</span>
<span class="cm"># Oppure usa 'https://TUO_IP_LND:10009' se LND su server diverso</span>

[database]
url = "sqlite:///config/mostro.db"

[nostr]
nsec_privkey = 'TUA_CHIAVE_NSEC_QUI'
relays = ['wss://relay.mostro.network', 'wss://nos.lol']</code></pre>
        </div>

        <h5>5. Eseguire il container</h5>

        <p><strong>Se LND √® sullo stesso VPS:</strong></p>
        <div class="code-block">
          <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)"
              data-copy="Copia" data-copied="Copiato!">Copia</button></div>
          <pre><code>docker run -d --name mostro \
  --restart unless-stopped \
  --add-host=host.docker.internal:host-gateway \
  -v ~/mostro-config:/config \
  mostrop2p/mostro:latest</code></pre>
        </div>

        <p><strong>Se LND √® su un server diverso:</strong></p>
        <div class="code-block">
          <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)"
              data-copy="Copia" data-copied="Copiato!">Copia</button></div>
          <pre><code>docker run -d --name mostro \
  --restart unless-stopped \
  -v ~/mostro-config:/config \
  mostrop2p/mostro:latest</code></pre>
        </div>

        <h5>6. Controllare i log</h5>
        <div class="code-block">
          <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)"
              data-copy="Copia" data-copied="Copiato!">Copia</button></div>
          <pre><code>docker logs -f mostro</code></pre>
        </div>

        <p><strong>Vantaggi del deployment Docker Hub:</strong></p>
        <ul>
          <li>‚úÖ Nessun tempo di compilazione (5-15 minuti risparmiati)</li>
          <li>‚úÖ Non serve clonare il repository</li>
          <li>‚úÖ Minori requisiti di storage VPS</li>
          <li>‚úÖ Aggiornamenti automatici con <code>docker pull mostrop2p/mostro:latest</code></li>
          <li>‚úÖ Perfetto per deployment di produzione su VPS</li>
        </ul>

        <div class="callout warning">
          <div class="callout-title">üîí Nota di Sicurezza</div>
          Usando un tag di versione specifica (es. <code>mostrop2p/mostro:v0.16.2</code>) invece di <code>:latest</code>, hai un controllo migliore sugli aggiornamenti e puoi testare le nuove versioni prima del deployment.
        </div>

      </div>
    </details>

    <details class="collapsible" id="percorso-b-nativo">
      <summary>Percorso B: Compilazione Nativa (Per operatori tecnici)</summary>
      <div class="collapsible-content">

        <h4>Passo 1: Connettiti e aggiorna</h4>
        <div class="code-block">
          <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)"
              data-copy="Copia" data-copied="Copiato!">Copia</button></div>
          <pre><code>ssh root@INDIRIZZO_IP_DEL_TUO_VPS
apt update
apt upgrade -y</code></pre>
        </div>

        <h4>Passo 2: Installare Rust</h4>
        <div class="code-block">
          <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)"
              data-copy="Copia" data-copied="Copiato!">Copia</button></div>
          <pre><code><span class="cm"># Installa Rust (premi 1 quando richiesto)</span>
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh

<span class="cm"># Rendi Rust disponibile nella sessione corrente</span>
source /root/.cargo/env

<span class="cm"># Verifica</span>
rustc --version   <span class="cm"># Atteso: rustc 1.86.0+</span>
cargo --version   <span class="cm"># Atteso: cargo 1.86.0+</span></code></pre>
        </div>

        <div class="callout warning">
          <div class="callout-title">‚ö†Ô∏è Importante</div>
          NON installare Rust via <code>apt install rustc</code>. Usa sempre <code>rustup</code> come mostrato sopra. Il
          pacchetto di sistema √® spesso obsoleto e causer√† errori di compilazione.
        </div>

        <h4>Passo 3: Installare le dipendenze</h4>
        <div class="code-block">
          <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)"
              data-copy="Copia" data-copied="Copiato!">Copia</button></div>
          <pre><code>apt install -y cmake build-essential libsqlite3-dev libssl-dev pkg-config git sqlite3 protobuf-compiler</code></pre>
        </div>

        <h4>Passo 4: Scaricare e compilare Mostro</h4>
        <div class="code-block">
          <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)"
              data-copy="Copia" data-copied="Copiato!">Copia</button></div>
          <pre><code>cd /opt
git clone https://github.com/MostroP2P/mostro.git
cd mostro
cargo build --release</code></pre>
        </div>

        <div class="callout tip">
          <div class="callout-title">üí° Suggerimento</div>
          Se la compilazione fallisce per mancanza di RAM, aggiungi spazio swap:
          <div class="code-block" style="margin-top:10px">
            <pre><code>fallocate -l 2G /swapfile
chmod 600 /swapfile
mkswap /swapfile
swapon /swapfile</code></pre>
          </div>
        </div>

        <h4>Passo 5: Installare il binario</h4>
        <div class="code-block">
          <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)"
              data-copy="Copia" data-copied="Copiato!">Copia</button></div>
          <pre><code>install target/release/mostrod /usr/local/bin
mostrod --version</code></pre>
        </div>

        <h4>Passo 6: Inizializzare il database</h4>
        <div class="code-block">
          <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)"
              data-copy="Copia" data-copied="Copiato!">Copia</button></div>
          <pre><code>cargo install sqlx-cli --version 0.6.2
./init_db.sh</code></pre>
        </div>

        <h4>Passo 7: Pulire i file di compilazione</h4>
        <div class="code-block">
          <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)"
              data-copy="Copia" data-copied="Copiato!">Copia</button></div>
          <pre><code>cargo clean</code></pre>
        </div>

        <h4>Passo 8: Creare un utente dedicato</h4>
        <div class="code-block">
          <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)"
              data-copy="Copia" data-copied="Copiato!">Copia</button></div>
          <pre><code>adduser --disabled-login mostro</code></pre>
        </div>

        <h4>Passo 9: Configurare Mostro</h4>
        <div class="code-block">
          <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)"
              data-copy="Copia" data-copied="Copiato!">Copia</button></div>
          <pre><code>mkdir -p /opt/mostro
cp /opt/mostro/mostro/settings.tpl.toml /opt/mostro/settings.toml
nano /opt/mostro/settings.toml</code></pre>
        </div>

        <p>Modifica le stesse impostazioni del Percorso A, Passo 7.</p>

        <h4>Passo 10: Test di esecuzione</h4>
        <div class="code-block">
          <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)"
              data-copy="Copia" data-copied="Copiato!">Copia</button></div>
          <pre><code>/usr/local/bin/mostrod -d /opt/mostro</code></pre>
        </div>
        <p>Se si connette a LND e ai relay, premi <code>Ctrl+C</code> per fermarlo.</p>

        <h4>Passo 11: Impostare i permessi</h4>
        <div class="code-block">
          <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)"
              data-copy="Copia" data-copied="Copiato!">Copia</button></div>
          <pre><code>chown -R mostro:mostro /opt/mostro</code></pre>
        </div>

        <h4>Passo 12: Configurare come servizio di sistema</h4>
        <div class="code-block">
          <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)"
              data-copy="Copia" data-copied="Copiato!">Copia</button></div>
          <pre><code>nano /etc/systemd/system/mostro.service</code></pre>
        </div>

        <p>Incolla questo contenuto:</p>
        <div class="code-block">
          <div class="code-block-header"><span>ini</span><button class="copy-btn" onclick="copyCode(this)"
              data-copy="Copia" data-copied="Copiato!">Copia</button></div>
          <pre><code>[Unit]
Description=Mostro daemon
After=network.target

[Service]
Type=simple
User=mostro
WorkingDirectory=/home/mostro
Environment=RUST_LOG=info
ExecStart=/usr/local/bin/mostrod -d /opt/mostro
Restart=on-failure

[Install]
WantedBy=multi-user.target</code></pre>
        </div>

        <div class="code-block">
          <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)"
              data-copy="Copia" data-copied="Copiato!">Copia</button></div>
          <pre><code>systemctl daemon-reload
systemctl enable mostro.service
systemctl start mostro.service
systemctl status mostro.service</code></pre>
        </div>

        <h4>Passo 13: Verifica</h4>
        <div class="code-block">
          <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)"
              data-copy="Copia" data-copied="Copiato!">Copia</button></div>
          <pre><code>ps aux | grep mostrod
journalctl -u mostro -f</code></pre>
        </div>

        <p>üéâ <strong>Congratulazioni!</strong> Il tuo nodo Mostro funziona come servizio di sistema e si riavvier√†
          automaticamente dopo i riavvii.</p>

      </div>
    </details>

    <hr>

    <h2 id="configurazione">4. Configurazione in Dettaglio</h2>

    <p>Il file <code>settings.toml</code> controlla tutto del tuo nodo Mostro.</p>

    <h3 id="cfg-nostr">4.1 Chiavi Nostr ‚Äî L'identit√† del tuo nodo</h3>

    <div class="code-block">
      <div class="code-block-header"><span>toml</span><button class="copy-btn" onclick="copyCode(this)"
          data-copy="Copia" data-copied="Copiato!">Copia</button></div>
      <pre><code>[nostr]
nsec_privkey = 'YOUR_NSEC_PRIVATE_KEY'
relays = [
  'wss://relay.mostro.network',
  'wss://nos.lol',
  'wss://relay.nostr.band'
]</code></pre>
    </div>

    <p><strong>Generare chiavi Nostr:</strong></p>
    <ul>
      <li><strong>rana</strong> (CLI): <code>cargo install rana && rana</code> ‚Äî <strong>Raccomandato:</strong> locale, sicuro, supporta generazione di chiavi vanity</li>
      <li>Qualsiasi client Nostr (Damus, Amethyst, ecc.) ‚Äî per casi d'uso meno critici</li>
    </ul>

    <div class="callout warning">
      <div class="callout-title">üîí Nota di Sicurezza</div>
      Per applicazioni critiche come i nodi Mostro, genera sempre le chiavi localmente usando strumenti come <code>rana</code>. Non usare mai generatori di chiavi online per infrastrutture importanti.
    </div>

    <div class="callout tip">
      <div class="callout-title">üí° Suggerimento</div>
      Puoi anche eseguire il tuo relay Nostr insieme a Mostro (l'installazione Docker ne include uno di default).
    </div>

    <h3 id="cfg-commissioni">4.2 Commissioni ‚Äî Come generi entrate</h3>

    <div class="code-block">
      <div class="code-block-header"><span>toml</span><button class="copy-btn" onclick="copyCode(this)"
          data-copy="Copia" data-copied="Copiato!">Copia</button></div>
      <pre><code>[mostro]
fee = 0.006
dev_fee_percentage = 0.30</code></pre>
    </div>

    <p><strong>Commissione di trading (<code>fee</code>):</strong> Percentuale addebitata per scambio, divisa tra
      acquirente e venditore.</p>
    <ul>
      <li><code>0.006</code> = 0,6% (ogni parte paga 0,3%)</li>
      <li><code>0.01</code> = 1,0% (ogni parte paga 0,5%)</li>
      <li><code>0</code> = gratuito (buono per far crescere la base utenti)</li>
    </ul>

    <p><strong>Commissione di sviluppo (<code>dev_fee_percentage</code>):</strong> Una percentuale dei <em>tuoi</em>
      guadagni che va allo sviluppo di Mostro.</p>
    <ul>
      <li><code>0.30</code> = 30% (default) ‚Äî dei 600 sats, 180 vanno al fondo di sviluppo</li>
      <li>Minimo: 10% (<code>0.10</code>), Massimo: 100% (<code>1.0</code>)</li>
    </ul>

    <div class="callout note">
      <div class="callout-title">üìù Nota</div>
      Impostare <code>dev_fee_percentage</code> sotto <code>0.10</code> impedir√† a Mostro di avviarsi.
    </div>

    <h3 id="cfg-limiti">4.3 Limiti degli ordini e valute</h3>

    <div class="code-block">
      <div class="code-block-header"><span>toml</span><button class="copy-btn" onclick="copyCode(this)"
          data-copy="Copia" data-copied="Copiato!">Copia</button></div>
      <pre><code>[mostro]
max_order_amount = 1000000
min_payment_amount = 100
fiat_currencies_accepted = ['USD', 'EUR', 'ARS', 'CUP']</code></pre>
    </div>

    <ul>
      <li><strong><code>max_order_amount</code>:</strong> Scambio massimo in satoshi. Impostalo in base alla capacit√†
        dei tuoi canali.</li>
      <li><strong><code>min_payment_amount</code>:</strong> Scambio minimo in satoshi.</li>
      <li><strong><code>fiat_currencies_accepted</code>:</strong> Usa <a href="https://en.wikipedia.org/wiki/ISO_4217"
          target="_blank" rel="noopener noreferrer">codici ISO 4217</a>. Array vuoto <code>[]</code> accetta tutte.</li>
    </ul>

    <h3 id="cfg-profilo">4.4 Profilo del nodo (Opzionale ma consigliato)</h3>

    <div class="code-block">
      <div class="code-block-header"><span>toml</span><button class="copy-btn" onclick="copyCode(this)"
          data-copy="Copia" data-copied="Copiato!">Copia</button></div>
      <pre><code>[mostro]
name = "Italia Mostro"
about = "Exchange P2P di Bitcoin per l'Italia. Supporto in italiano."
picture = "https://esempio.com/il-tuo-logo.png"
website = "https://sito-della-tua-comunita.com"</code></pre>
    </div>

    <h3 id="cfg-tempi">4.5 Tempi e scadenze</h3>

    <div class="code-block">
      <div class="code-block-header"><span>toml</span><button class="copy-btn" onclick="copyCode(this)"
          data-copy="Copia" data-copied="Copiato!">Copia</button></div>
      <pre><code>[mostro]
expiration_hours = 24
expiration_seconds = 900
hold_invoice_expiration_window = 300</code></pre>
    </div>

    <ul>
      <li><strong><code>expiration_hours</code>:</strong> Quanto tempo un ordine resta aperto (24h default)</li>
      <li><strong><code>expiration_seconds</code>:</strong> Tempo per completare l'azione (900s = 15 min)</li>
      <li><strong><code>hold_invoice_expiration_window</code>:</strong> Validit√† dell'hold invoice (300s = 5 min)</li>
    </ul>

    <h3 id="cfg-antispam">4.6 Anti-Spam</h3>

    <div class="code-block">
      <div class="code-block-header"><span>toml</span><button class="copy-btn" onclick="copyCode(this)"
          data-copy="Copia" data-copied="Copiato!">Copia</button></div>
      <pre><code>[mostro]
pow = 0</code></pre>
    </div>

    <p><strong>Proof of Work:</strong> <code>0</code> = disabilitato; <code>10-20</code> = moderato. Inizia con
      <code>0</code>.</p>

    <h3 id="cfg-rpc">4.7 Interfaccia RPC Admin (Opzionale)</h3>

    <div class="code-block">
      <div class="code-block-header"><span>toml</span><button class="copy-btn" onclick="copyCode(this)"
          data-copy="Copia" data-copied="Copiato!">Copia</button></div>
      <pre><code>[rpc]
enabled = false
listen_address = "127.0.0.1"
port = 50051</code></pre>
    </div>

    <div class="callout warning">
      <div class="callout-title">‚ö†Ô∏è Sicurezza</div>
      Se abiliti RPC, mantieni <code>listen_address</code> come <code>"127.0.0.1"</code>. Non esporre mai questo a
      internet.
    </div>

    <hr>

    <h2 id="operazioni">5. Gestione del Tuo Nodo Mostro</h2>

    <h3 id="dispute">5.1 Come funzionano le dispute</h3>

    <p>Le dispute sono la tua responsabilit√† operativa pi√π importante.</p>

    <p><strong>Il processo di disputa:</strong></p>
    <ol>
      <li><strong>Un utente apre una disputa</strong> ‚Äî Una delle parti preme "Disputa"</li>
      <li><strong>Mostro segna l'ordine</strong> ‚Äî Lo stato diventa "Disputa", i fondi restano bloccati</li>
      <li><strong>Un arbitro prende il caso</strong> ‚Äî Un amministratore comincia a studiare il caso</li>
      <li><strong>Indagine</strong> ‚Äî Comunica con entrambe le parti, richiede prove</li>
      <li><strong>Risoluzione</strong> ‚Äî L'arbitro decide: liquidare al venditore, o cancellare/rimborsare
        all'acquirente</li>
    </ol>

    <div class="callout warning">
      <div class="callout-title">‚ö†Ô∏è Importante</div>
      Scegli gli arbitri con cura. Hanno il potere di decidere dove vanno i fondi bloccati. Scegli membri fidati e
      imparziali. Si consigliano 2‚Äì3 arbitri.
    </div>

    <h3 id="mostrix">5.2 Mostrix ‚Äî Il tuo strumento di amministrazione per la risoluzione delle dispute</h3>

    <p><a href="https://github.com/MostroP2P/mostrix" target="_blank"
        rel="noopener noreferrer"><strong>Mostrix</strong></a> √® un client da terminale (TUI) per Mostro. Attualmente √®
      l'<strong>unico strumento disponibile per la risoluzione delle dispute</strong> da parte degli operatori dei nodi.
      Se gestisci un nodo Mostro, hai bisogno di Mostrix.</p>

    <p><strong>Cosa fa:</strong></p>
    <ul>
      <li>Navigare e interagire con gli ordini sul tuo nodo Mostro</li>
      <li><strong>Prendere dispute</strong> ‚Äî rivendicare una disputa cos√¨ gli altri admin sanno che la stai gestendo
      </li>
      <li><strong>Chattare con entrambe le parti</strong> ‚Äî comunicare con acquirente e venditore in una vista divisa
      </li>
      <li><strong>Risolvere dispute</strong> ‚Äî "Pay Buyer" (rilasciare sats all'acquirente) o "Refund Seller"
        (restituire sats al venditore)</li>
      <li><strong>Gestire solver</strong> ‚Äî aggiungere altri risolutori di dispute dall'interfaccia di amministrazione
      </li>
    </ul>

    <h4>Installazione di Mostrix</h4>
    <div class="callout warning">
      <div class="callout-title">‚ö†Ô∏è Prerequisito: Rust/Cargo richiesto</div>
      Mostrix deve essere compilato dal codice sorgente. Se hai seguito il Percorso A (Docker), potresti non avere Rust
      installato. Segui il <a href="#passo-2-installare-rust">Percorso B, Passo 2</a> per installare Rust tramite
      rustup.
    </div>
    <div class="code-block">
      <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)"
          data-copy="Copia" data-copied="Copiato!">Copia</button></div>
      <pre><code><span class="cm"># Installa le dipendenze (Ubuntu/Debian)</span>
sudo apt update
sudo apt install -y cmake build-essential pkg-config

<span class="cm"># Clona e compila</span>
git clone https://github.com/MostroP2P/mostrix.git
cd mostrix
cargo build --release

<span class="cm"># Esegui</span>
cargo run</code></pre>
    </div>

    <p>Al primo avvio, Mostrix crea <code>~/.mostrix/settings.toml</code>. Modifica questo file per configurarlo.</p>

    <h4>Configurazione di Mostrix in modalit√† amministratore</h4>
    <div class="code-block">
      <div class="code-block-header"><span>toml</span><button class="copy-btn" onclick="copyCode(this)"
          data-copy="Copia" data-copied="Copiato!">Copia</button></div>
      <pre><code><span class="cm"># Chiave pubblica del tuo nodo Mostro (formato hex)</span>
mostro_pubkey = "YOUR_MOSTRO_PUBKEY_HEX"

<span class="cm"># La tua chiave privata personale Nostr</span>
nsec_privkey = "nsec1your_personal_key"

<span class="cm"># La tua chiave privata ADMIN ‚Äî deve corrispondere a una chiave solver registrata sul nodo</span>
admin_privkey = "nsec1your_admin_key"

<span class="cm"># I relay usati dal tuo nodo Mostro</span>
relays = [
  "wss://relay.mostro.network",
  "wss://nos.lol",
  "wss://relay.nostr.band"
]

<span class="cm"># Valute fiat che vuoi vedere</span>
currencies = ["USD", "EUR", "ARS"]

<span class="cm"># IMPORTANTE: Imposta su "admin" per abilitare le funzioni di risoluzione dispute</span>
user_mode = "admin"</code></pre>
    </div>

    <div class="callout tip">
      <div class="callout-title">üí° Distinzione chiave</div>
      <code>nsec_privkey</code> √® la tua chiave personale Nostr (per firmare eventi). <code>admin_privkey</code> √® la
      chiave che concede privilegi di amministratore ‚Äî deve essere registrata come solver sul nodo Mostro.
    </div>

    <h4>Risoluzione delle dispute con Mostrix</h4>
    <ol>
      <li><strong>Tab Disputes Pending</strong> ‚Äî Mostra tutte le dispute con stato "Initiated". Selezionane una e premi
        <strong>Enter</strong> per prenderla (gli altri admin vedranno che l'hai rivendicata).</li>
      <li><strong>Tab Disputes in Progress</strong> ‚Äî Il tuo spazio di lavoro. Ogni disputa mostra:
        <ul>
          <li>Informazioni complete della disputa (acquirente, venditore, importi, valuta, valutazioni)</li>
          <li>Vista chat divisa ‚Äî premi <strong>Tab</strong> per alternare tra la chat dell'acquirente e del venditore
          </li>
          <li>Premi <strong>Shift+I</strong> per abilitare l'input della chat, scrivi il tuo messaggio</li>
          <li>Usa <strong>PageUp/PageDown</strong> per scorrere, <strong>End</strong> per andare all'ultimo messaggio
          </li>
        </ul>
      </li>
      <li><strong>Finalizza</strong> ‚Äî Premi <strong>Shift+F</strong> per aprire il popup di finalizzazione:
        <ul>
          <li><strong>Pay Buyer</strong> ‚Äî Rilasciare i sats bloccati all'acquirente (usare quando il venditore ha
            ricevuto il fiat ma non rilascia)</li>
          <li><strong>Refund Seller</strong> ‚Äî Annullare la hold invoice, restituendo i sats al venditore (usare quando
            l'acquirente non ha effettivamente pagato)</li>
          <li><strong>Exit</strong> ‚Äî Chiudere senza azione se hai bisogno di pi√π tempo</li>
        </ul>
      </li>
      <li>Una volta finalizzata, la disputa √® chiusa e non pu√≤ essere modificata.</li>
    </ol>

    <div class="callout note">
      <div class="callout-title">üìù Nota</div>
      Mostrix √® ancora in fase di sviluppo. Alcune funzionalit√† come la chat peer-to-peer e la cancellazione cooperativa
      non sono ancora implementate. Ma il flusso principale di risoluzione delle dispute √® completamente funzionale.
    </div>

    <h3 id="watchdog">5.3 mostro-watchdog ‚Äî Notifiche delle dispute su Telegram</h3>

    <p><a href="https://github.com/MostroP2P/mostro-watchdog" target="_blank"
        rel="noopener noreferrer"><strong>mostro-watchdog</strong></a> √® un bot di notifica che monitora il tuo nodo
      Mostro per le dispute e invia avvisi istantanei a un gruppo Telegram. Questo √® essenziale per tempi di risposta
      rapidi ‚Äî non vuoi stare costantemente a guardare Mostrix aspettando le dispute.</p>

    <p><strong>Come funziona:</strong></p>
    <div class="code-block">
      <div class="code-block-header"><span>Flusso</span></div>
      <pre><code>Mostro daemon ‚Üí Nostr (kind 38386) ‚Üí mostro-watchdog ‚Üí Avviso Telegram üö®</code></pre>
    </div>

    <p>Quando un utente apre una disputa, il tuo gruppo Telegram di admin riceve una notifica istantanea come:</p>
    <div class="code-block">
      <div class="code-block-header"><span>Avviso Telegram</span></div>
      <pre><code>üö® NEW DISPUTE

üìã Dispute ID: abc123def456
üë§ Initiated by: buyer
‚è∞ Time: 2026-02-11 18:30:00 UTC

‚ö° Please take this dispute in Mostrix or your admin client.</code></pre>
    </div>

    <h4>Installazione di mostro-watchdog</h4>
    <div class="callout warning">
      <div class="callout-title">‚ö†Ô∏è Prerequisito: Rust/Cargo richiesto</div>
      Come Mostrix, mostro-watchdog deve essere compilato dal codice sorgente. Assicurati di avere Rust installato (<a
        href="#passo-2-installare-rust">Percorso B, Passo 2</a>).
    </div>
    <div class="code-block">
      <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)"
          data-copy="Copia" data-copied="Copiato!">Copia</button></div>
      <pre><code>git clone https://github.com/MostroP2P/mostro-watchdog.git
cd mostro-watchdog
cargo build --release</code></pre>
    </div>

    <h4>Configurazione di mostro-watchdog</h4>
    <div class="code-block">
      <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)"
          data-copy="Copia" data-copied="Copiato!">Copia</button></div>
      <pre><code>cp config.example.toml config.toml
nano config.toml</code></pre>
    </div>

    <div class="code-block">
      <div class="code-block-header"><span>toml</span><button class="copy-btn" onclick="copyCode(this)"
          data-copy="Copia" data-copied="Copiato!">Copia</button></div>
      <pre><code>[mostro]
<span class="cm"># Chiave pubblica Nostr del tuo daemon Mostro</span>
pubkey = "YOUR_MOSTRO_PUBKEY"

[nostr]
<span class="cm"># Gli stessi relay usati dal tuo daemon Mostro</span>
relays = ["wss://relay.mostro.network", "wss://nos.lol", "wss://relay.nostr.band"]

[telegram]
<span class="cm"># Ottieni questo da @BotFather su Telegram</span>
bot_token = "YOUR_BOT_TOKEN"

<span class="cm"># L'ID del gruppo/canale Telegram per gli avvisi admin</span>
chat_id = "YOUR_CHAT_ID"</code></pre>
    </div>

    <p><strong>Configurazione del bot Telegram:</strong></p>
    <ol>
      <li>Invia un messaggio a <a href="https://t.me/BotFather" target="_blank" rel="noopener noreferrer">@BotFather</a>
        su Telegram ‚Üí <code>/newbot</code> ‚Üí segui le istruzioni</li>
      <li>Copia il token del bot in <code>config.toml</code></li>
      <li>Crea un <strong>gruppo Telegram privato</strong> per il tuo team di amministrazione</li>
      <li>Aggiungi il bot al gruppo</li>
      <li>Ottieni il chat ID (invia un messaggio nel gruppo, poi controlla
        <code>https://api.telegram.org/bot&lt;YOUR_TOKEN&gt;/getUpdates</code>)</li>
    </ol>

    <h4>Esecuzione di mostro-watchdog</h4>
    <div class="code-block">
      <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)"
          data-copy="Copia" data-copied="Copiato!">Copia</button></div>
      <pre><code><span class="cm"># Esegui con configurazione predefinita</span>
./target/release/mostro-watchdog

<span class="cm"># Percorso di configurazione personalizzato</span>
./target/release/mostro-watchdog /path/to/config.toml

<span class="cm"># Con logging di debug</span>
RUST_LOG=mostro_watchdog=debug ./target/release/mostro-watchdog</code></pre>
    </div>

    <div class="callout tip">
      <div class="callout-title">üí° Suggerimento</div>
      Esegui mostro-watchdog come servizio systemd (come Mostro) cos√¨ si avvia automaticamente e funziona 24/7. I tuoi
      admin non dovrebbero mai perdere una notifica di disputa.
    </div>

    <h4>Il flusso completo delle dispute</h4>
    <p>Mettendo tutto insieme, il flusso completo per un operatore di nodo √®:</p>
    <ol>
      <li><strong>mostro-watchdog</strong> rileva una nuova disputa ‚Üí invia avviso Telegram al tuo gruppo admin</li>
      <li>L'admin vede l'avviso sul telefono/desktop</li>
      <li>L'admin apre <strong>Mostrix</strong> in modalit√† amministratore</li>
      <li>L'admin va su <strong>Disputes Pending</strong> ‚Üí prende la disputa</li>
      <li>L'admin indaga tramite chat con acquirente e venditore in <strong>Disputes in Progress</strong></li>
      <li>L'admin risolve con <strong>Pay Buyer</strong> o <strong>Refund Seller</strong></li>
      <li>Fatto ‚Äî disputa chiusa, utenti notificati automaticamente</li>
    </ol>

    <p>Questo flusso garantisce tempi di risposta rapidi e responsabilit√† chiara.</p>

    <h3 id="monitoraggio">5.4 Monitoraggio dell'uptime</h3>

    <div class="code-block">
      <div class="code-block-header"><span>bash ‚Äî Nativo</span><button class="copy-btn" onclick="copyCode(this)"
          data-copy="Copia" data-copied="Copiato!">Copia</button></div>
      <pre><code>systemctl status mostro.service
journalctl -u mostro -f</code></pre>
    </div>

    <div class="code-block">
      <div class="code-block-header"><span>bash ‚Äî Docker</span><button class="copy-btn" onclick="copyCode(this)"
          data-copy="Copia" data-copied="Copiato!">Copia</button></div>
      <pre><code>docker compose -f /opt/mostro/docker/compose.yml ps
docker compose -f /opt/mostro/docker/compose.yml logs -f mostro</code></pre>
    </div>

    <h3 id="aggiornamento">5.5 Aggiornare Mostro</h3>

    <details class="collapsible">
      <summary>Aggiornamento Docker</summary>
      <div class="collapsible-content">
        <div class="code-block">
          <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)"
              data-copy="Copia" data-copied="Copiato!">Copia</button></div>
          <pre><code>cd /opt/mostro
git pull origin main
make docker-build
make docker-down
make docker-up</code></pre>
        </div>
      </div>
    </details>

    <details class="collapsible">
      <summary>Aggiornamento nativo</summary>
      <div class="collapsible-content">
        <div class="code-block">
          <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)"
              data-copy="Copia" data-copied="Copiato!">Copia</button></div>
          <pre><code>cd /opt/mostro
git pull origin main
cargo build --release
install target/release/mostrod /usr/local/bin
cargo clean
cargo install sqlx-cli --version 0.6.2
sqlx migrate run
systemctl restart mostro.service</code></pre>
        </div>
      </div>
    </details>

    <div class="callout tip">
      <div class="callout-title">üí° Suggerimento</div>
      Fai sempre un backup del database prima di aggiornare.
    </div>

    <h3 id="backup">5.6 Backup</h3>

    <p>File critici: <code>settings.toml</code> (contiene la tua chiave privata Nostr!) e <code>mostro.db</code>
      (storico ordini, reputazioni).</p>

    <div class="code-block">
      <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)"
          data-copy="Copia" data-copied="Copiato!">Copia</button></div>
      <pre><code><span class="cm"># Backup manuale ‚Äî Docker (build da repo):</span>
mkdir -p /root/mostro-backups
cp /opt/mostro/docker/config/settings.toml /root/mostro-backups/settings.toml.$(date +%Y%m%d)
cp /opt/mostro/docker/config/mostro.db /root/mostro-backups/mostro.db.$(date +%Y%m%d)

<span class="cm"># Backup manuale ‚Äî Docker Hub deployment:</span>
cp ~/mostro-config/settings.toml /root/mostro-backups/settings.toml.$(date +%Y%m%d)
cp ~/mostro-config/mostro.db /root/mostro-backups/mostro.db.$(date +%Y%m%d)

<span class="cm"># Backup manuale ‚Äî Nativo:</span>
cp /opt/mostro/settings.toml /root/mostro-backups/settings.toml.$(date +%Y%m%d)
cp /opt/mostro/mostro.db /root/mostro-backups/mostro.db.$(date +%Y%m%d)</code></pre>
    </div>

    <div class="callout warning">
      <div class="callout-title">‚ö†Ô∏è Critico</div>
      La tua <code>nsec_privkey</code> in <code>settings.toml</code> √à l'identit√† del tuo nodo. Se la perdi, perdi la
      reputazione. <strong>Conserva una copia offline.</strong>
    </div>

    <h3 id="attivita">5.7 Controllare l'attivit√† di scambio</h3>

    <div class="code-block">
      <div class="code-block-header"><span>bash</span><button class="copy-btn" onclick="copyCode(this)"
          data-copy="Copia" data-copied="Copiato!">Copia</button></div>
      <pre><code>sqlite3 /percorso/a/mostro.db "SELECT COUNT(*) FROM orders;"
sqlite3 /percorso/a/mostro.db "SELECT id, fiat_amount, fiat_code, amount, status, created_at FROM orders WHERE status = 'success' ORDER BY created_at DESC LIMIT 10;"</code></pre>
    </div>

    <hr>

    <h2 id="costi">6. Analisi dei Costi</h2>

    <h3>Costi operativi mensili</h3>
    <div class="table-wrapper">
      <table>
        <thead>
          <tr>
            <th>Voce</th>
            <th>Costo mensile</th>
            <th>Note</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>VPS (server)</td>
            <td>$10‚Äì24</td>
            <td>Dipende dal provider e specifiche</td>
          </tr>
          <tr>
            <td>Nome di dominio (opzionale)</td>
            <td>$1‚Äì2</td>
            <td>Per un sito web/identit√†</td>
          </tr>
          <tr>
            <td>Commissioni on-chain canali Lightning</td>
            <td>Variabile</td>
            <td>Apertura/chiusura canali</td>
          </tr>
          <tr>
            <td><strong>Totale mensile</strong></td>
            <td><strong>$11‚Äì26</strong></td>
            <td>Esclusa liquidit√† Lightning</td>
          </tr>
        </tbody>
      </table>
    </div>

    <h3>Potenziale di entrate</h3>
    <div class="table-wrapper">
      <table>
        <thead>
          <tr>
            <th>Volume mensile</th>
            <th>Commissione (0,6%)</th>
            <th>Fee dev (30%)</th>
            <th>Entrata netta</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>$1.000</td>
            <td>~$6</td>
            <td>~$1,80</td>
            <td>~$4,20</td>
          </tr>
          <tr>
            <td>$10.000</td>
            <td>~$60</td>
            <td>~$18</td>
            <td>~$42</td>
          </tr>
          <tr>
            <td>$50.000</td>
            <td>~$300</td>
            <td>~$90</td>
            <td>~$210</td>
          </tr>
          <tr>
            <td>$100.000</td>
            <td>~$600</td>
            <td>~$180</td>
            <td>~$420</td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="callout note">
      <div class="callout-title">üìù Realt√†</div>
      La maggior parte dei nuovi nodi impiega mesi per costruire volume. Non aspettarti profittabilit√† immediata. Il
      vero valore spesso viene dal fornire un servizio alla tua comunit√†.
    </div>

    <hr>

    <h2 id="domande">7. Domande Frequenti</h2>

    <details class="collapsible">
      <summary>Devo essere uno sviluppatore per gestire un nodo Mostro?</summary>
      <div class="collapsible-content">
        <p>No, ma devi essere a tuo agio con operazioni base da riga di comando. Il percorso Docker (Percorso A) √®
          progettato per essere accessibile.</p>
      </div>
    </details>

    <details class="collapsible">
      <summary>Posso eseguire Mostro su un Raspberry Pi?</summary>
      <div class="collapsible-content">
        <p>Tecnicamente s√¨ (usando Start9 o simili), ma non √® consigliato per la produzione per limitazioni di CPU e
          RAM.</p>
      </div>
    </details>

    <details class="collapsible">
      <summary>Posso usare Core Lightning (CLN) invece di LND?</summary>
      <div class="collapsible-content">
        <p>No. Mostro attualmente supporta solo LND. Il supporto per altre implementazioni potrebbe arrivare in futuro.
        </p>
      </div>
    </details>

    <details class="collapsible">
      <summary>Come si connettono gli utenti al mio Mostro?</summary>
      <div class="collapsible-content">
        <p>Servono un'app client Mostro e la chiave pubblica del tuo nodo (npub). Comunicano tramite relay Nostr,
          nessuna connessione diretta necessaria.</p>
      </div>
    </details>

    <details class="collapsible">
      <summary>√à legale?</summary>
      <div class="collapsible-content">
        <p>Dipende dalla tua giurisdizione. Mostro √® software per il trading peer-to-peer. In alcune giurisdizioni
          potrebbe richiedere licenze. <strong>Consulta le normative locali e un consulente legale.</strong></p>
      </div>
    </details>

    <details class="collapsible">
      <summary>Posso perdere denaro gestendo un nodo?</summary>
      <div class="collapsible-content">
        <p>S√¨, √® possibile: fondi dei canali a rischio per bug (raro); chiusure forzate costose; costi VPS continui;
          investimento di tempo reale.</p>
      </div>
    </details>

    <details class="collapsible">
      <summary>Quando raggiunger√≤ il pareggio?</summary>
      <div class="collapsible-content">
        <p>Con $20/mese di costi e 0,6% di commissione, servono ~$5.000/mese in scambi. La maggior parte delle comunit√†
          impiega 3‚Äì6 mesi.</p>
      </div>
    </details>

    <hr>

    <h2 id="sicurezza">8. Considerazioni sulla Sicurezza</h2>

    <div class="callout warning">
      <div class="callout-title">‚ö†Ô∏è Avviso software in fase iniziale</div>
      <p><strong>Mostro √® in una fase iniziale di sviluppo.</strong> Potrebbero esserci bug non scoperti, inclusi bug di
        sicurezza che potrebbero causare perdita di fondi. <strong>Gli sviluppatori non sono responsabili per perdite di
          denaro dovute a bug del software.</strong></p>
      <p>Il <strong>meccanismo di custodia centrale usando hold invoice Lightning √® stato testato in battaglia dal
          2021</strong>, quando <a href="https://github.com/lnp2pBot/bot" target="_blank"
          rel="noopener noreferrer">@lnp2pBot</a> ha implementato per primo questo tipo di custodia.</p>
    </div>

    <h3>Operare sotto regimi autoritari</h3>

    <p>Se operi in un paese con un governo autoritario, <strong>la privacy non √® opzionale ‚Äî √® un requisito di
        sicurezza.</strong></p>

    <ol>
      <li><strong>Esegui il tuo nodo Mostro dietro Tor e/o una VPN.</strong></li>
      <li><strong>Se Tor/VPN non √® possibile</strong>, pubblica eventi solo su relay che possiedi o di cui ti fidi.</li>
      <li><strong>Stai molto attento a quali relay usi.</strong> In futuro, i governi potrebbero creare relay Nostr per
        raccogliere indirizzi IP.</li>
      <li><strong>Considera anche la privacy del tuo nodo Lightning.</strong></li>
    </ol>

    <hr>

    <h2 id="risoluzione-problemi">9. Risoluzione dei Problemi</h2>

    <h3>Mostro non si avvia</h3>

    <h4>"Failed to connect to LND"</h4>
    <ul>
      <li>Verifica che LND funzioni: <code>lncli getinfo</code></li>
      <li>Controlla <code>lnd_grpc_host</code></li>
      <li>Verifica i percorsi di <code>tls.cert</code> e <code>admin.macaroon</code></li>
    </ul>

    <h3>Problemi di connessione</h3>
    <ul>
      <li>Verifica gli URL dei relay (devono iniziare con <code>wss://</code>)</li>
      <li>Controlla che il firewall permetta connessioni in uscita sulla porta 443</li>
    </ul>

    <h3>Ottenere aiuto</h3>
    <ol>
      <li><strong>Controlla prima i log</strong></li>
      <li><strong>Telegram (Sviluppatori):</strong> <a href="https://t.me/mostro_dev" target="_blank"
          rel="noopener noreferrer">@mostro_dev</a></li>
      <li><strong>Telegram (Comunit√†):</strong> <a href="https://t.me/MostroP2P" target="_blank"
          rel="noopener noreferrer">@MostroP2P</a></li>
      <li><strong>GitHub Issues:</strong> <a href="https://github.com/MostroP2P/mostro/issues" target="_blank"
          rel="noopener noreferrer">github.com/MostroP2P/mostro/issues</a></li>
    </ol>

    <hr>

    <h2 id="appendice">Appendice: Riferimento Rapido</h2>

    <h3>Posizioni importanti dei file</h3>
    <div class="table-wrapper">
      <table>
        <thead>
          <tr>
            <th>File</th>
            <th>Docker (build repo)</th>
            <th>Docker Hub</th>
            <th>Nativo</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Configurazione</td>
            <td><code>/opt/mostro/docker/config/settings.toml</code></td>
            <td><code>~/mostro-config/settings.toml</code></td>
            <td><code>/opt/mostro/settings.toml</code></td>
          </tr>
          <tr>
            <td>Database</td>
            <td><code>/opt/mostro/docker/config/mostro.db</code></td>
            <td><code>~/mostro-config/mostro.db</code></td>
            <td><code>/opt/mostro/mostro.db</code></td>
          </tr>
          <tr>
            <td>Cert LND</td>
            <td><code>/opt/mostro/docker/config/lnd/tls.cert</code></td>
            <td><code>~/mostro-config/lnd/tls.cert</code></td>
            <td>Varia</td>
          </tr>
          <tr>
            <td>Macaroon LND</td>
            <td><code>/opt/mostro/docker/config/lnd/admin.macaroon</code></td>
            <td><code>~/mostro-config/lnd/admin.macaroon</code></td>
            <td>Varia</td>
          </tr>
          <tr>
            <td>File servizio</td>
            <td>N/A</td>
            <td>N/A</td>
            <td><code>/etc/systemd/system/mostro.service</code></td>
          </tr>
          <tr>
            <td>Log</td>
            <td><code>docker compose logs</code></td>
            <td><code>docker logs -f mostro</code></td>
            <td><code>journalctl -u mostro</code></td>
          </tr>
        </tbody>
      </table>
    </div>

    <h3>Comandi essenziali</h3>
    <div class="code-block">
      <div class="code-block-header"><span>bash ‚Äî Docker</span><button class="copy-btn" onclick="copyCode(this)"
          data-copy="Copia" data-copied="Copiato!">Copia</button></div>
      <pre><code>make docker-build          <span class="cm"># Costruisci</span>
make docker-up             <span class="cm"># Avvia</span>
make docker-down           <span class="cm"># Arresta</span>
docker compose logs -f     <span class="cm"># Vedi log</span></code></pre>
    </div>

    <div class="code-block">
      <div class="code-block-header"><span>bash ‚Äî Nativo</span><button class="copy-btn" onclick="copyCode(this)"
          data-copy="Copia" data-copied="Copiato!">Copia</button></div>
      <pre><code>systemctl start mostro     <span class="cm"># Avvia</span>
systemctl stop mostro      <span class="cm"># Arresta</span>
systemctl restart mostro   <span class="cm"># Riavvia</span>
systemctl status mostro    <span class="cm"># Stato</span>
journalctl -u mostro -f    <span class="cm"># Vedi log</span></code></pre>
    </div>

    <h3>Impostazioni consigliate per nuovi nodi</h3>
    <div class="code-block">
      <div class="code-block-header"><span>toml</span><button class="copy-btn" onclick="copyCode(this)"
          data-copy="Copia" data-copied="Copiato!">Copia</button></div>
      <pre><code>[mostro]
fee = 0.006
max_order_amount = 500000
min_payment_amount = 1000
expiration_hours = 24
expiration_seconds = 900
pow = 0
dev_fee_percentage = 0.30
fiat_currencies_accepted = ['USD']  <span class="cm"># Cambia con la tua valuta locale</span>

[nostr]
relays = [
  'wss://relay.mostro.network',
  'wss://nos.lol',
  'wss://relay.nostr.band'
]</code></pre>
    </div>

    <div class="guide-footer">
      <p>Questa guida √® mantenuta dalla comunit√† Mostro. Hai trovato un errore o vuoi migliorarla?<br>
        I contributi sono benvenuti su <a href="https://github.com/MostroP2P/mostro" target="_blank"
          rel="noopener noreferrer">github.com/MostroP2P/mostro</a></p>
      <p style="margin-top:12px;">Ultimo aggiornamento: Febbraio 2026 ¬∑ Mostro v0.16.2</p>
    </div>

  </main>

  <button class="back-to-top" id="backToTop" onclick="window.scrollTo({top:0,behavior:'smooth'})">‚Üë</button>

  <script src="guide.js"></script>

</body>

</html>
